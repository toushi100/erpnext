{"version":3,"file":"e-commerce.min.js","sources":["../../../apps/erpnext/erpnext/e_commerce/product_ui/views.js","../../../apps/erpnext/erpnext/e_commerce/product_ui/grid.js","../../../apps/erpnext/erpnext/e_commerce/product_ui/list.js","../../../apps/erpnext/erpnext/e_commerce/product_ui/search.js"],"sourcesContent":["erpnext.ProductView =  class {\n\t/* Options:\n\t\t- View Type\n\t\t- Products Section Wrapper,\n\t\t- Item Group: If its an Item Group page\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\t\tthis.preference = this.view_type;\n\t\tthis.make();\n\t}\n\n\tmake(from_filters=false) {\n\t\tthis.products_section.empty();\n\t\tthis.prepare_toolbar();\n\t\tthis.get_item_filter_data(from_filters);\n\t}\n\n\tprepare_toolbar() {\n\t\tthis.products_section.append(`\n\t\t\t<div class=\"toolbar d-flex\">\n\t\t\t</div>\n\t\t`);\n\t\tthis.prepare_search();\n\t\tthis.prepare_view_toggler();\n\n\t\tfrappe.require('/assets/js/e-commerce.min.js', function() {\n\t\t\tnew erpnext.ProductSearch();\n\t\t});\n\t}\n\n\tprepare_view_toggler() {\n\n\t\tif (!$(\"#list\").length || !$(\"#image-view\").length) {\n\t\t\tthis.render_view_toggler();\n\t\t\tthis.bind_view_toggler_actions();\n\t\t\tthis.set_view_state();\n\t\t}\n\t}\n\n\tget_item_filter_data(from_filters=false) {\n\t\t// Get and render all Product related views\n\t\tlet me = this;\n\t\tthis.from_filters = from_filters;\n\t\tlet args = this.get_query_filters();\n\n\t\tthis.disable_view_toggler(true);\n\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.e_commerce.api.get_product_filter_data\",\n\t\t\targs: {\n\t\t\t\tquery_args: args\n\t\t\t},\n\t\t\tcallback: function(result) {\n\t\t\t\tif (!result || result.exc || !result.message || result.message.exc) {\n\t\t\t\t\tme.render_no_products_section(true);\n\t\t\t\t} else {\n\t\t\t\t\t// Sub Category results are independent of Items\n\t\t\t\t\tif (me.item_group && result.message[\"sub_categories\"].length) {\n\t\t\t\t\t\tme.render_item_sub_categories(result.message[\"sub_categories\"]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!result.message[\"items\"].length) {\n\t\t\t\t\t\t// if result has no items or result is empty\n\t\t\t\t\t\tme.render_no_products_section();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Add discount filters\n\t\t\t\t\t\tme.re_render_discount_filters(result.message[\"filters\"].discount_filters);\n\n\t\t\t\t\t\t// Render views\n\t\t\t\t\t\tme.render_list_view(result.message[\"items\"], result.message[\"settings\"]);\n\t\t\t\t\t\tme.render_grid_view(result.message[\"items\"], result.message[\"settings\"]);\n\n\t\t\t\t\t\tme.products = result.message[\"items\"];\n\t\t\t\t\t\tme.product_count = result.message[\"items_count\"];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind filter actions\n\t\t\t\t\tif (!from_filters) {\n\t\t\t\t\t\t// If `get_product_filter_data` was triggered after checking a filter,\n\t\t\t\t\t\t// don't touch filters unnecessarily, only data must change\n\t\t\t\t\t\t// filter persistence is handle on filter change event\n\t\t\t\t\t\tme.bind_filters();\n\t\t\t\t\t\tme.restore_filters_state();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bottom paging\n\t\t\t\t\tme.add_paging_section(result.message[\"settings\"]);\n\t\t\t\t}\n\n\t\t\t\tme.disable_view_toggler(false);\n\t\t\t}\n\t\t});\n\t}\n\n\tdisable_view_toggler(disable=false) {\n\t\t$('#list').prop('disabled', disable);\n\t\t$('#image-view').prop('disabled', disable);\n\t}\n\n\trender_grid_view(items, settings) {\n\t\t// loop over data and add grid html to it\n\t\tlet me = this;\n\t\tthis.prepare_product_area_wrapper(\"grid\");\n\n\t\tfrappe.require('/assets/js/e-commerce.min.js', function() {\n\t\t\tnew erpnext.ProductGrid({\n\t\t\t\titems: items,\n\t\t\t\tproducts_section: $(\"#products-grid-area\"),\n\t\t\t\tsettings: settings,\n\t\t\t\tpreference: me.preference\n\t\t\t});\n\t\t});\n\t}\n\n\trender_list_view(items, settings) {\n\t\tlet me = this;\n\t\tthis.prepare_product_area_wrapper(\"list\");\n\n\t\tfrappe.require('/assets/js/e-commerce.min.js', function() {\n\t\t\tnew erpnext.ProductList({\n\t\t\t\titems: items,\n\t\t\t\tproducts_section: $(\"#products-list-area\"),\n\t\t\t\tsettings: settings,\n\t\t\t\tpreference: me.preference\n\t\t\t});\n\t\t});\n\t}\n\n\tprepare_product_area_wrapper(view) {\n\t\tlet left_margin = view == \"list\" ? \"ml-2\" : \"\";\n\t\tlet top_margin = view == \"list\" ? \"mt-6\" : \"mt-minus-1\";\n\t\treturn this.products_section.append(`\n\t\t\t<br>\n\t\t\t<div id=\"products-${view}-area\" class=\"row products-list ${ top_margin } ${ left_margin }\"></div>\n\t\t`);\n\t}\n\n\tget_query_filters() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet {field_filters, attribute_filters} = filters;\n\n\t\tfield_filters = field_filters ? JSON.parse(field_filters) : {};\n\t\tattribute_filters = attribute_filters ? JSON.parse(attribute_filters) : {};\n\n\t\treturn {\n\t\t\tfield_filters: field_filters,\n\t\t\tattribute_filters: attribute_filters,\n\t\t\titem_group: this.item_group,\n\t\t\tstart: filters.start || null,\n\t\t\tfrom_filters: this.from_filters || false\n\t\t};\n\t}\n\n\tadd_paging_section(settings) {\n\t\t$(\".product-paging-area\").remove();\n\n\t\tif (this.products) {\n\t\t\tlet paging_html = `\n\t\t\t\t<div class=\"row product-paging-area mt-5\">\n\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-9 text-right\">\n\t\t\t`;\n\t\t\tlet query_params = frappe.utils.get_query_params();\n\t\t\tlet start = query_params.start ? cint(JSON.parse(query_params.start)) : 0;\n\t\t\tlet page_length = settings.products_per_page || 0;\n\n\t\t\tlet prev_disable = start > 0 ? \"\" : \"disabled\";\n\t\t\tlet next_disable = (this.product_count > page_length) ? \"\" : \"disabled\";\n\n\t\t\tpaging_html += `\n\t\t\t\t<button class=\"btn btn-default btn-prev\" data-start=\"${ start - page_length }\"\n\t\t\t\t\tstyle=\"float: left\" ${prev_disable}>\n\t\t\t\t\t${ __(\"Prev\") }\n\t\t\t\t</button>`;\n\n\t\t\tpaging_html += `\n\t\t\t\t<button class=\"btn btn-default btn-next\" data-start=\"${ start + page_length }\"\n\t\t\t\t\t${next_disable}>\n\t\t\t\t\t${ __(\"Next\") }\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tpaging_html += `</div></div>`;\n\n\t\t\t$(\".page_content\").append(paging_html);\n\t\t\tthis.bind_paging_action();\n\t\t}\n\t}\n\n\tprepare_search() {\n\t\t$(\".toolbar\").append(`\n\t\t\t<div class=\"input-group col-8 p-0\">\n\t\t\t\t<div class=\"dropdown w-100\" id=\"dropdownMenuSearch\">\n\t\t\t\t\t<input type=\"search\" name=\"query\" id=\"search-box\" class=\"form-control font-md\"\n\t\t\t\t\t\tplaceholder=\"Search for Products\"\n\t\t\t\t\t\taria-label=\"Product\" aria-describedby=\"button-addon2\">\n\t\t\t\t\t<div class=\"search-icon\">\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\tclass=\"feather feather-search\">\n\t\t\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n\t\t\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Results dropdown rendered in product_search.js -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\trender_view_toggler() {\n\t\t$(\".toolbar\").append(`<div class=\"toggle-container col-4 p-0\"></div>`);\n\n\t\t[\"btn-list-view\", \"btn-grid-view\"].forEach(view => {\n\t\t\tlet icon = view === \"btn-list-view\" ? \"list\" : \"image-view\";\n\t\t\t$(\".toggle-container\").append(`\n\t\t\t\t<div class=\"form-group mb-0\" id=\"toggle-view\">\n\t\t\t\t\t<button id=\"${ icon }\" class=\"btn ${ view } mr-2\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t\t<use href=\"#icon-${ icon }\"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t});\n\t}\n\n\tbind_view_toggler_actions() {\n\t\t$(\"#list\").click(function() {\n\t\t\tlet $btn = $(this);\n\t\t\t$btn.removeClass('btn-primary');\n\t\t\t$btn.addClass('btn-primary');\n\t\t\t$(\".btn-grid-view\").removeClass('btn-primary');\n\n\t\t\t$(\"#products-grid-area\").addClass(\"hidden\");\n\t\t\t$(\"#products-list-area\").removeClass(\"hidden\");\n\t\t\tlocalStorage.setItem(\"product_view\", \"List View\");\n\t\t});\n\n\t\t$(\"#image-view\").click(function() {\n\t\t\tlet $btn = $(this);\n\t\t\t$btn.removeClass('btn-primary');\n\t\t\t$btn.addClass('btn-primary');\n\t\t\t$(\".btn-list-view\").removeClass('btn-primary');\n\n\t\t\t$(\"#products-list-area\").addClass(\"hidden\");\n\t\t\t$(\"#products-grid-area\").removeClass(\"hidden\");\n\t\t\tlocalStorage.setItem(\"product_view\", \"Grid View\");\n\t\t});\n\t}\n\n\tset_view_state() {\n\t\tif (this.preference === \"List View\") {\n\t\t\t$(\"#list\").addClass('btn-primary');\n\t\t\t$(\"#image-view\").removeClass('btn-primary');\n\t\t} else {\n\t\t\t$(\"#image-view\").addClass('btn-primary');\n\t\t\t$(\"#list\").removeClass('btn-primary');\n\t\t}\n\t}\n\n\tbind_paging_action() {\n\t\tlet me = this;\n\t\t$('.btn-prev, .btn-next').click((e) => {\n\t\t\tconst $btn = $(e.target);\n\t\t\tme.from_filters = false;\n\n\t\t\t$btn.prop('disabled', true);\n\t\t\tconst start = $btn.data('start');\n\n\t\t\tlet query_params = frappe.utils.get_query_params();\n\t\t\tquery_params.start = start;\n\t\t\tlet path = window.location.pathname + '?' + frappe.utils.get_url_from_dict(query_params);\n\t\t\twindow.location.href = path;\n\t\t});\n\t}\n\n\tre_render_discount_filters(filter_data) {\n\t\tthis.get_discount_filter_html(filter_data);\n\t\tif (this.from_filters) {\n\t\t\t// Bind filter action if triggered via filters\n\t\t\t// if not from filter action, page load will bind actions\n\t\t\tthis.bind_discount_filter_action();\n\t\t}\n\t\t// discount filters are rendered with Items (later)\n\t\t// unlike the other filters\n\t\tthis.restore_discount_filter();\n\t}\n\n\tget_discount_filter_html(filter_data) {\n\t\t$(\"#discount-filters\").remove();\n\t\tif (filter_data) {\n\t\t\t$(\"#product-filters\").append(`\n\t\t\t\t<div id=\"discount-filters\" class=\"mb-4 filter-block pb-5\">\n\t\t\t\t\t<div class=\"filter-label mb-3\">${ __(\"Discounts\") }</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tlet html = `<div class=\"filter-options\">`;\n\t\t\tfilter_data.forEach(filter => {\n\t\t\t\thtml += `\n\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t<label data-value=\"${ filter[0] }\">\n\t\t\t\t\t\t\t<input type=\"radio\"\n\t\t\t\t\t\t\t\tclass=\"product-filter discount-filter\"\n\t\t\t\t\t\t\t\tname=\"discount\" id=\"${ filter[0] }\"\n\t\t\t\t\t\t\t\tdata-filter-name=\"discount\"\n\t\t\t\t\t\t\t\tdata-filter-value=\"${ filter[0] }\"\n\t\t\t\t\t\t\t\tstyle=\"width: 14px !important\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"label-area\" for=\"${ filter[0] }\">\n\t\t\t\t\t\t\t\t\t${ filter[1] }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t});\n\t\t\thtml += `</div>`;\n\n\t\t\t$(\"#discount-filters\").append(html);\n\t\t}\n\t}\n\n\trestore_discount_filter() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet field_filters = filters.field_filters;\n\t\tif (!field_filters) return;\n\n\t\tfield_filters = JSON.parse(field_filters);\n\n\t\tif (field_filters && field_filters[\"discount\"]) {\n\t\t\tconst values = field_filters[\"discount\"];\n\t\t\tconst selector = values.map(value => {\n\t\t\t\treturn `input[data-filter-name=\"discount\"][data-filter-value=\"${value}\"]`;\n\t\t\t}).join(',');\n\t\t\t$(selector).prop('checked', true);\n\t\t\tthis.field_filters = field_filters;\n\t\t}\n\t}\n\n\tbind_discount_filter_action() {\n\t\tlet me = this;\n\t\t$('.discount-filter').on('change', (e) => {\n\t\t\tconst $checkbox = $(e.target);\n\t\t\tconst is_checked = $checkbox.is(':checked');\n\n\t\t\tconst {\n\t\t\t\tfilterValue: filter_value\n\t\t\t} = $checkbox.data();\n\n\t\t\tdelete this.field_filters[\"discount\"];\n\n\t\t\tif (is_checked) {\n\t\t\t\tthis.field_filters[\"discount\"] = [];\n\t\t\t\tthis.field_filters[\"discount\"].push(filter_value);\n\t\t\t}\n\n\t\t\tif (this.field_filters[\"discount\"].length === 0) {\n\t\t\t\tdelete this.field_filters[\"discount\"];\n\t\t\t}\n\n\t\t\tme.change_route_with_filters();\n\t\t});\n\t}\n\n\tbind_filters() {\n\t\tlet me = this;\n\t\tthis.field_filters = {};\n\t\tthis.attribute_filters = {};\n\n\t\t$('.product-filter').on('change', (e) => {\n\t\t\tme.from_filters = true;\n\n\t\t\tconst $checkbox = $(e.target);\n\t\t\tconst is_checked = $checkbox.is(':checked');\n\n\t\t\tif ($checkbox.is('.attribute-filter')) {\n\t\t\t\tconst {\n\t\t\t\t\tattributeName: attribute_name,\n\t\t\t\t\tattributeValue: attribute_value\n\t\t\t\t} = $checkbox.data();\n\n\t\t\t\tif (is_checked) {\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name] || [];\n\t\t\t\t\tthis.attribute_filters[attribute_name].push(attribute_value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name] || [];\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name].filter(v => v !== attribute_value);\n\t\t\t\t}\n\n\t\t\t\tif (this.attribute_filters[attribute_name].length === 0) {\n\t\t\t\t\tdelete this.attribute_filters[attribute_name];\n\t\t\t\t}\n\t\t\t} else if ($checkbox.is('.field-filter') || $checkbox.is('.discount-filter')) {\n\t\t\t\tconst {\n\t\t\t\t\tfilterName: filter_name,\n\t\t\t\t\tfilterValue: filter_value\n\t\t\t\t} = $checkbox.data();\n\n\t\t\t\tif ($checkbox.is('.discount-filter')) {\n\t\t\t\t\t// clear previous discount filter to accomodate new\n\t\t\t\t\tdelete this.field_filters[\"discount\"];\n\t\t\t\t}\n\t\t\t\tif (is_checked) {\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name] || [];\n\t\t\t\t\tif (!in_list(this.field_filters[filter_name], filter_value)) {\n\t\t\t\t\t\tthis.field_filters[filter_name].push(filter_value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name] || [];\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name].filter(v => v !== filter_value);\n\t\t\t\t}\n\n\t\t\t\tif (this.field_filters[filter_name].length === 0) {\n\t\t\t\t\tdelete this.field_filters[filter_name];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.change_route_with_filters();\n\t\t});\n\t}\n\n\tchange_route_with_filters() {\n\t\tlet route_params = frappe.utils.get_query_params();\n\n\t\tlet start = this.if_key_exists(route_params.start) || 0;\n\t\tif (this.from_filters) {\n\t\t\tstart = 0; // show items from first page if new filters are triggered\n\t\t}\n\n\t\tconst query_string = this.get_query_string({\n\t\t\tstart: start,\n\t\t\tfield_filters: JSON.stringify(this.if_key_exists(this.field_filters)),\n\t\t\tattribute_filters: JSON.stringify(this.if_key_exists(this.attribute_filters)),\n\t\t});\n\t\twindow.history.pushState('filters', '', `${location.pathname}?` + query_string);\n\n\t\t$('.page_content input').prop('disabled', true);\n\n\t\tthis.make(true);\n\t\t$('.page_content input').prop('disabled', false);\n\t}\n\n\trestore_filters_state() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet {field_filters, attribute_filters} = filters;\n\n\t\tif (field_filters) {\n\t\t\tfield_filters = JSON.parse(field_filters);\n\t\t\tfor (let fieldname in field_filters) {\n\t\t\t\tconst values = field_filters[fieldname];\n\t\t\t\tconst selector = values.map(value => {\n\t\t\t\t\treturn `input[data-filter-name=\"${fieldname}\"][data-filter-value=\"${value}\"]`;\n\t\t\t\t}).join(',');\n\t\t\t\t$(selector).prop('checked', true);\n\t\t\t}\n\t\t\tthis.field_filters = field_filters;\n\t\t}\n\t\tif (attribute_filters) {\n\t\t\tattribute_filters = JSON.parse(attribute_filters);\n\t\t\tfor (let attribute in attribute_filters) {\n\t\t\t\tconst values = attribute_filters[attribute];\n\t\t\t\tconst selector = values.map(value => {\n\t\t\t\t\treturn `input[data-attribute-name=\"${attribute}\"][data-attribute-value=\"${value}\"]`;\n\t\t\t\t}).join(',');\n\t\t\t\t$(selector).prop('checked', true);\n\t\t\t}\n\t\t\tthis.attribute_filters = attribute_filters;\n\t\t}\n\t}\n\n\trender_no_products_section(error=false) {\n\t\tlet error_section = `\n\t\t\t<div class=\"mt-4 w-100 alert alert-error font-md\">\n\t\t\t\tSomething went wrong. Please refresh or contact us.\n\t\t\t</div>\n\t\t`;\n\t\tlet no_results_section = `\n\t\t\t<div class=\"cart-empty frappe-card mt-4\">\n\t\t\t\t<div class=\"cart-empty-state\">\n\t\t\t\t\t<img src=\"/assets/erpnext/images/ui-states/cart-empty-state.png\" alt=\"Empty Cart\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"cart-empty-message mt-4\">${ __('No products found') }</p>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.products_section.append(error ? error_section : no_results_section);\n\t}\n\n\trender_item_sub_categories(categories) {\n\t\tif (categories && categories.length) {\n\t\t\tlet sub_group_html = `\n\t\t\t\t<div class=\"sub-category-container scroll-categories\">\n\t\t\t`;\n\n\t\t\tcategories.forEach(category => {\n\t\t\t\tsub_group_html += `\n\t\t\t\t\t<a href=\"${ category.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<div class=\"category-pill\">\n\t\t\t\t\t\t\t${ category.name }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t});\n\t\t\tsub_group_html += `</div>`;\n\n\t\t\t$(\"#product-listing\").prepend(sub_group_html);\n\t\t}\n\t}\n\n\tget_query_string(object) {\n\t\tconst url = new URLSearchParams();\n\t\tfor (let key in object) {\n\t\t\tconst value = object[key];\n\t\t\tif (value) {\n\t\t\t\turl.append(key, value);\n\t\t\t}\n\t\t}\n\t\treturn url.toString();\n\t}\n\n\tif_key_exists(obj) {\n\t\tlet exists = false;\n\t\tfor (let key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && obj[key]) {\n\t\t\t\texists = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn exists ? obj : undefined;\n\t}\n};","erpnext.ProductGrid = class {\n\t/* Options:\n\t\t- items: Items\n\t\t- settings: E Commerce Settings\n\t\t- products_section: Products Wrapper\n\t\t- preference: If preference is not grid view, render but hide\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\n\t\tif (this.preference !== \"Grid View\") {\n\t\t\tthis.products_section.addClass(\"hidden\");\n\t\t}\n\n\t\tthis.products_section.empty();\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\t\tlet html = ``;\n\n\t\tthis.items.forEach(item => {\n\t\t\tlet title = item.web_item_name || item.item_name || item.item_code || \"\";\n\t\t\ttitle =  title.length > 90 ? title.substr(0, 90) + \"...\" : title;\n\n\t\t\thtml += `<div class=\"col-sm-4 item-card\"><div class=\"card text-left\">`;\n\t\t\thtml += me.get_image_html(item, title);\n\t\t\thtml += me.get_card_body_html(item, title, me.settings);\n\t\t\thtml += `</div></div>`;\n\t\t});\n\n\t\tlet $product_wrapper = this.products_section;\n\t\t$product_wrapper.append(html);\n\t}\n\n\tget_image_html(item, title) {\n\t\tlet image = item.website_image || item.image;\n\n\t\tif (image) {\n\t\t\treturn `\n\t\t\t\t<div class=\"card-img-container\">\n\t\t\t\t\t<a href=\"/${ item.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<img class=\"card-img\" src=\"${ image }\" alt=\"${ title }\">\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn `\n\t\t\t\t<div class=\"card-img-container\">\n\t\t\t\t\t<a href=\"/${ item.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<div class=\"card-img-top no-image\">\n\t\t\t\t\t\t\t${ frappe.get_abbr(title) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tget_card_body_html(item, title, settings) {\n\t\tlet body_html = `\n\t\t\t<div class=\"card-body text-left card-body-flex\" style=\"width:100%\">\n\t\t\t\t<div style=\"margin-top: 1rem; display: flex;\">\n\t\t`;\n\t\tbody_html += this.get_title(item, title);\n\n\t\t// get floating elements\n\t\tif (!item.has_variants) {\n\t\t\tif (settings.enable_wishlist) {\n\t\t\t\tbody_html += this.get_wishlist_icon(item);\n\t\t\t}\n\t\t\tif (settings.enabled) {\n\t\t\t\tbody_html += this.get_cart_indicator(item);\n\t\t\t}\n\n\t\t}\n\n\t\tbody_html += `</div>`;\n\t\tbody_html += `<div class=\"product-category\">${ item.item_group || '' }</div>`;\n\n\t\tif (item.formatted_price) {\n\t\t\tbody_html += this.get_price_html(item);\n\t\t}\n\n\t\tbody_html += this.get_stock_availability(item, settings);\n\t\tbody_html += this.get_primary_button(item, settings);\n\t\tbody_html += `</div>`; // close div on line 49\n\n\t\treturn body_html;\n\t}\n\n\tget_title(item, title) {\n\t\tlet title_html = `\n\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t<div class=\"product-title\">\n\t\t\t\t\t${ title || '' }\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t`;\n\t\treturn title_html;\n\t}\n\n\tget_wishlist_icon(item) {\n\t\tlet icon_class = item.wished ? \"wished\" : \"not-wished\";\n\t\treturn `\n\t\t\t<div class=\"like-action ${ item.wished ? \"like-action-wished\" : ''}\"\n\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t<svg class=\"icon sm\">\n\t\t\t\t\t<use class=\"${ icon_class } wish-icon\" href=\"#icon-heart\"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_cart_indicator(item) {\n\t\treturn `\n\t\t\t<div class=\"cart-indicator ${item.in_cart ? '' : 'hidden'}\" data-item-code=\"${ item.item_code }\">\n\t\t\t\t1\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_price_html(item) {\n\t\tlet price_html = `\n\t\t\t<div class=\"product-price\">\n\t\t\t\t${ item.formatted_price || '' }\n\t\t`;\n\n\t\tif (item.formatted_mrp) {\n\t\t\tprice_html += `\n\t\t\t\t<small class=\"striked-price\">\n\t\t\t\t\t<s>${ item.formatted_mrp ? item.formatted_mrp.replace(/ +/g, \"\") : \"\" }</s>\n\t\t\t\t</small>\n\t\t\t\t<small class=\"ml-1 product-info-green\">\n\t\t\t\t\t${ item.discount } OFF\n\t\t\t\t</small>\n\t\t\t`;\n\t\t}\n\t\tprice_html += `</div>`;\n\t\treturn price_html;\n\t}\n\n\tget_stock_availability(item, settings) {\n\t\tif (settings.show_stock_availability && !item.has_variants) {\n\t\t\tif (item.on_backorder) {\n\t\t\t\treturn `\n\t\t\t\t\t<span class=\"out-of-stock mb-2 mt-1\" style=\"color: var(--primary-color)\">\n\t\t\t\t\t\t${ __(\"Available on backorder\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t} else if (!item.in_stock) {\n\t\t\t\treturn `\n\t\t\t\t\t<span class=\"out-of-stock mb-2 mt-1\">\n\t\t\t\t\t\t${ __(\"Out of stock\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t}\n\n\t\treturn ``;\n\t}\n\n\tget_primary_button(item, settings) {\n\t\tif (item.has_variants) {\n\t\t\treturn `\n\t\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t\t<div class=\"btn btn-sm btn-explore-variants w-100 mt-4\">\n\t\t\t\t\t\t${ __('Explore') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else if (settings.enabled && (settings.allow_items_not_in_stock || item.in_stock)) {\n\t\t\treturn `\n\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\tw-100 mt-2 ${ item.in_cart ? 'hidden' : '' }\"\n\t\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t<use href=\"#icon-assets\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ settings.enable_checkout ? __('Add to Cart') :  __('Add to Quote') }\n\t\t\t\t</div>\n\n\t\t\t\t<a href=\"/cart\">\n\t\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\t\tw-100 mt-4 go-to-cart-grid\n\t\t\t\t\t\t${ item.in_cart ? '' : 'hidden' }\"\n\t\t\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t\t\t${ settings.enable_checkout ? __('Go to Cart') :  __('Go to Quote') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn ``;\n\t\t}\n\t}\n};","erpnext.ProductList = class {\n\t/* Options:\n\t\t- items: Items\n\t\t- settings: E Commerce Settings\n\t\t- products_section: Products Wrapper\n\t\t- preference: If preference is not list view, render but hide\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\n\t\tif (this.preference !== \"List View\") {\n\t\t\tthis.products_section.addClass(\"hidden\");\n\t\t}\n\n\t\tthis.products_section.empty();\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\t\tlet html = `<br><br>`;\n\n\t\tthis.items.forEach(item => {\n\t\t\tlet title = item.web_item_name || item.item_name || item.item_code || \"\";\n\t\t\ttitle =  title.length > 200 ? title.substr(0, 200) + \"...\" : title;\n\n\t\t\thtml += `<div class='row list-row w-100 mb-4'>`;\n\t\t\thtml += me.get_image_html(item, title, me.settings);\n\t\t\thtml += me.get_row_body_html(item, title, me.settings);\n\t\t\thtml += `</div>`;\n\t\t});\n\n\t\tlet $product_wrapper = this.products_section;\n\t\t$product_wrapper.append(html);\n\t}\n\n\tget_image_html(item, title, settings) {\n\t\tlet image = item.website_image || item.image;\n\t\tlet wishlist_enabled = !item.has_variants && settings.enable_wishlist;\n\t\tlet image_html = ``;\n\n\t\tif (image) {\n\t\t\timage_html += `\n\t\t\t\t<div class=\"col-2 border text-center rounded list-image\">\n\t\t\t\t\t<a class=\"product-link product-list-link\" href=\"/${ item.route || '#' }\">\n\t\t\t\t\t\t<img itemprop=\"image\" class=\"website-image h-100 w-100\" alt=\"${ title }\"\n\t\t\t\t\t\t\tsrc=\"${ image }\">\n\t\t\t\t\t</a>\n\t\t\t\t\t${ wishlist_enabled ? this.get_wishlist_icon(item): '' }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t} else {\n\t\t\timage_html += `\n\t\t\t\t<div class=\"col-2 border text-center rounded list-image\">\n\t\t\t\t\t<a class=\"product-link product-list-link\" href=\"/${ item.route || '#' }\"\n\t\t\t\t\t\tstyle=\"text-decoration: none\">\n\t\t\t\t\t\t<div class=\"card-img-top no-image-list\">\n\t\t\t\t\t\t\t${ frappe.get_abbr(title) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t${ wishlist_enabled ? this.get_wishlist_icon(item): '' }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn image_html;\n\t}\n\n\tget_row_body_html(item, title, settings) {\n\t\tlet body_html = `<div class='col-10 text-left'>`;\n\t\tbody_html += this.get_title_html(item, title, settings);\n\t\tbody_html += this.get_item_details(item, settings);\n\t\tbody_html += `</div>`;\n\t\treturn body_html;\n\t}\n\n\tget_title_html(item, title, settings) {\n\t\tlet title_html = `<div style=\"display: flex; margin-left: -15px;\">`;\n\t\ttitle_html += `\n\t\t\t<div class=\"col-8\" style=\"margin-right: -15px;\">\n\t\t\t\t<a class=\"\" href=\"/${ item.route || '#' }\"\n\t\t\t\t\tstyle=\"color: var(--gray-800); font-weight: 500;\">\n\t\t\t\t\t${ title }\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tif (settings.enabled) {\n\t\t\ttitle_html += `<div class=\"col-4 cart-action-container ${item.in_cart ? 'd-flex' : ''}\">`;\n\t\t\ttitle_html += this.get_primary_button(item, settings);\n\t\t\ttitle_html += `</div>`;\n\t\t}\n\t\ttitle_html += `</div>`;\n\n\t\treturn title_html;\n\t}\n\n\tget_item_details(item, settings) {\n\t\tlet details = `\n\t\t\t<p class=\"product-code\">\n\t\t\t\t${ item.item_group } | Item Code : ${ item.item_code }\n\t\t\t</p>\n\t\t\t<div class=\"mt-2\" style=\"color: var(--gray-600) !important; font-size: 13px;\">\n\t\t\t\t${ item.short_description || '' }\n\t\t\t</div>\n\t\t\t<div class=\"product-price\">\n\t\t\t\t${ item.formatted_price || '' }\n\t\t`;\n\n\t\tif (item.formatted_mrp) {\n\t\t\tdetails += `\n\t\t\t\t<small class=\"striked-price\">\n\t\t\t\t\t<s>${ item.formatted_mrp ? item.formatted_mrp.replace(/ +/g, \"\") : \"\" }</s>\n\t\t\t\t</small>\n\t\t\t\t<small class=\"ml-1 product-info-green\">\n\t\t\t\t\t${ item.discount } OFF\n\t\t\t\t</small>\n\t\t\t`;\n\t\t}\n\n\t\tdetails += this.get_stock_availability(item, settings);\n\t\tdetails += `</div>`;\n\n\t\treturn details;\n\t}\n\n\tget_stock_availability(item, settings) {\n\t\tif (settings.show_stock_availability && !item.has_variants) {\n\t\t\tif (item.on_backorder) {\n\t\t\t\treturn `\n\t\t\t\t\t<br>\n\t\t\t\t\t<span class=\"out-of-stock mt-2\" style=\"color: var(--primary-color)\">\n\t\t\t\t\t\t${ __(\"Available on backorder\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t} else if (!item.in_stock) {\n\t\t\t\treturn `\n\t\t\t\t\t<br>\n\t\t\t\t\t<span class=\"out-of-stock mt-2\">${ __(\"Out of stock\") }</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t}\n\t\treturn ``;\n\t}\n\n\tget_wishlist_icon(item) {\n\t\tlet icon_class = item.wished ? \"wished\" : \"not-wished\";\n\n\t\treturn `\n\t\t\t<div class=\"like-action-list ${ item.wished ? \"like-action-wished\" : ''}\"\n\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t<svg class=\"icon sm\">\n\t\t\t\t\t<use class=\"${ icon_class } wish-icon\" href=\"#icon-heart\"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_primary_button(item, settings) {\n\t\tif (item.has_variants) {\n\t\t\treturn `\n\t\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t\t<div class=\"btn btn-sm btn-explore-variants btn mb-0 mt-0\">\n\t\t\t\t\t\t${ __('Explore') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else if (settings.enabled && (settings.allow_items_not_in_stock || item.in_stock)) {\n\t\t\treturn `\n\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list mb-0\n\t\t\t\t\t${ item.in_cart ? 'hidden' : '' }\"\n\t\t\t\t\tdata-item-code=\"${ item.item_code }\"\n\t\t\t\t\tstyle=\"margin-top: 0px !important; max-height: 30px; float: right;\n\t\t\t\t\t\tpadding: 0.25rem 1rem; min-width: 135px;\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t<use href=\"#icon-assets\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ settings.enable_checkout ? __('Add to Cart') :  __('Add to Quote') }\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"cart-indicator list-indicator ${item.in_cart ? '' : 'hidden'}\">\n\t\t\t\t\t1\n\t\t\t\t</div>\n\n\t\t\t\t<a href=\"/cart\">\n\t\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\t\tml-4 go-to-cart mb-0 mt-0\n\t\t\t\t\t\t${ item.in_cart ? '' : 'hidden' }\"\n\t\t\t\t\t\tdata-item-code=\"${ item.item_code }\"\n\t\t\t\t\t\tstyle=\"padding: 0.25rem 1rem; min-width: 135px;\">\n\t\t\t\t\t\t${ settings.enable_checkout ? __('Go to Cart') :  __('Go to Quote') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn ``;\n\t\t}\n\t}\n\n};","erpnext.ProductSearch = class {\n\tconstructor() {\n\t\tthis.MAX_RECENT_SEARCHES = 4;\n\t\tthis.searchBox = $(\"#search-box\");\n\n\t\tthis.setupSearchDropDown();\n\t\tthis.bindSearchAction();\n\t}\n\n\tsetupSearchDropDown() {\n\t\tthis.search_area = $(\"#dropdownMenuSearch\");\n\t\tthis.setupSearchResultContainer();\n\t\tthis.populateRecentSearches();\n\t}\n\n\tbindSearchAction() {\n\t\tlet me = this;\n\n\t\t// Show Search dropdown\n\t\tthis.searchBox.on(\"focus\", () => {\n\t\t\tthis.search_dropdown.removeClass(\"hidden\");\n\t\t});\n\n\t\t// If click occurs outside search input/results, hide results.\n\t\t// Click can happen anywhere on the page\n\t\t$(\"body\").on(\"click\", (e) => {\n\t\t\tlet searchEvent = $(e.target).closest('#search-box').length;\n\t\t\tlet resultsEvent = $(e.target).closest('#search-results-container').length;\n\t\t\tlet isResultHidden = this.search_dropdown.hasClass(\"hidden\");\n\n\t\t\tif (!searchEvent && !resultsEvent && !isResultHidden) {\n\t\t\t\tthis.search_dropdown.addClass(\"hidden\");\n\t\t\t}\n\t\t});\n\n\t\t// Process search input\n\t\tthis.searchBox.on(\"input\", (e) => {\n\t\t\tlet query = e.target.value;\n\n\t\t\tif (query.length == 0) {\n\t\t\t\tme.populateResults(null);\n\t\t\t\tme.populateCategoriesList(null);\n\t\t\t}\n\n\t\t\tif (query.length < 3 || !query.length) return;\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.templates.pages.product_search.search\",\n\t\t\t\targs: {\n\t\t\t\t\tquery: query\n\t\t\t\t},\n\t\t\t\tcallback: (data) => {\n\t\t\t\t\tlet product_results = null, category_results = null;\n\n\t\t\t\t\t// Populate product results\n\t\t\t\t\tproduct_results = data.message ? data.message.product_results : null;\n\t\t\t\t\tme.populateResults(product_results);\n\n\t\t\t\t\t// Populate categories\n\t\t\t\t\tif (me.category_container) {\n\t\t\t\t\t\tcategory_results = data.message ? data.message.category_results : null;\n\t\t\t\t\t\tme.populateCategoriesList(category_results);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Populate recent search chips only on successful queries\n\t\t\t\t\tif (!$.isEmptyObject(product_results) || !$.isEmptyObject(category_results)) {\n\t\t\t\t\t\tme.setRecentSearches(query);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.search_dropdown.removeClass(\"hidden\");\n\t\t});\n\t}\n\n\tsetupSearchResultContainer() {\n\t\tthis.search_dropdown = this.search_area.append(`\n\t\t\t<div class=\"overflow-hidden shadow dropdown-menu w-100 hidden\"\n\t\t\t\tid=\"search-results-container\"\n\t\t\t\taria-labelledby=\"dropdownMenuSearch\"\n\t\t\t\tstyle=\"display: flex; flex-direction: column;\">\n\t\t\t</div>\n\t\t`).find(\"#search-results-container\");\n\n\t\tthis.setupCategoryContainer();\n\t\tthis.setupProductsContainer();\n\t\tthis.setupRecentsContainer();\n\t}\n\n\tsetupProductsContainer() {\n\t\tthis.products_container = this.search_dropdown.append(`\n\t\t\t<div id=\"product-results mt-2\">\n\t\t\t\t<div id=\"product-scroll\" style=\"overflow: scroll; max-height: 300px\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\"#product-scroll\");\n\t}\n\n\tsetupCategoryContainer() {\n\t\tthis.category_container = this.search_dropdown.append(`\n\t\t\t<div class=\"category-container mt-2 mb-1\">\n\t\t\t\t<div class=\"category-chips\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\".category-chips\");\n\t}\n\n\tsetupRecentsContainer() {\n\t\tlet $recents_section = this.search_dropdown.append(`\n\t\t\t<div class=\"mb-2 mt-2 recent-searches\">\n\t\t\t\t<div>\n\t\t\t\t\t<b>${ __(\"Recent\") }</b>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\".recent-searches\");\n\n\t\tthis.recents_container = $recents_section.append(`\n\t\t\t<div id=\"recents\" style=\"padding: .25rem 0 1rem 0;\">\n\t\t\t</div>\n\t\t`).find(\"#recents\");\n\t}\n\n\tgetRecentSearches() {\n\t\treturn JSON.parse(localStorage.getItem(\"recent_searches\") || \"[]\");\n\t}\n\n\tattachEventListenersToChips() {\n\t\tlet me  = this;\n\t\tconst chips = $(\".recent-search\");\n\t\twindow.chips = chips;\n\n\t\tfor (let chip of chips) {\n\t\t\tchip.addEventListener(\"click\", () => {\n\t\t\t\tme.searchBox[0].value = chip.innerText.trim();\n\n\t\t\t\t// Start search with `recent query`\n\t\t\t\tme.searchBox.trigger(\"input\");\n\t\t\t\tme.searchBox.focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tsetRecentSearches(query) {\n\t\tlet recents = this.getRecentSearches();\n\t\tif (recents.length >= this.MAX_RECENT_SEARCHES) {\n\t\t\t// Remove the `first` query\n\t\t\trecents.splice(0, 1);\n\t\t}\n\n\t\tif (recents.indexOf(query) >= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\trecents.push(query);\n\t\tlocalStorage.setItem(\"recent_searches\", JSON.stringify(recents));\n\n\t\tthis.populateRecentSearches();\n\t}\n\n\tpopulateRecentSearches() {\n\t\tlet recents = this.getRecentSearches();\n\n\t\tif (!recents.length) {\n\t\t\tthis.recents_container.html(`<span class=\"\"text-muted\">No searches yet.</span>`);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = \"\";\n\t\trecents.forEach((key) => {\n\t\t\thtml += `\n\t\t\t\t<div class=\"recent-search mr-1\" style=\"font-size: 13px\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg width=\"20\" height=\"20\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t<path d=\"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z\" stroke=\"var(--gray-500)\"\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t\t<path d=\"M8.00027 5.20947V8.00017L10 10\" stroke=\"var(--gray-500)\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ key }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\n\t\tthis.recents_container.html(html);\n\t\tthis.attachEventListenersToChips();\n\t}\n\n\tpopulateResults(product_results) {\n\t\tif (!product_results || product_results.length === 0) {\n\t\t\tlet empty_html = ``;\n\t\t\tthis.products_container.html(empty_html);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = \"\";\n\n\t\tproduct_results.forEach((res) => {\n\t\t\tlet thumbnail = res.thumbnail || '/assets/erpnext/images/ui-states/cart-empty-state.png';\n\t\t\thtml += `\n\t\t\t\t<div class=\"dropdown-item\" style=\"display: flex;\">\n\t\t\t\t\t<img class=\"item-thumb col-2\" src=${thumbnail} />\n\t\t\t\t\t<div class=\"col-9\" style=\"white-space: normal;\">\n\t\t\t\t\t\t<a href=\"/${res.route}\">${res.web_item_name}</a><br>\n\t\t\t\t\t\t<span class=\"brand-line\">${res.brand ? \"by \" + res.brand : \"\"}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\n\t\tthis.products_container.html(html);\n\t}\n\n\tpopulateCategoriesList(category_results) {\n\t\tif (!category_results || category_results.length === 0) {\n\t\t\tlet empty_html = `\n\t\t\t\t<div class=\"category-container mt-2\">\n\t\t\t\t\t<div class=\"category-chips\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tthis.category_container.html(empty_html);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = `\n\t\t\t<div class=\"mb-2\">\n\t\t\t\t<b>${ __(\"Categories\") }</b>\n\t\t\t</div>\n\t\t`;\n\n\t\tcategory_results.forEach((category) => {\n\t\t\thtml += `\n\t\t\t\t<a href=\"/${category.route}\" class=\"btn btn-sm category-chip mr-2 mb-2\"\n\t\t\t\t\tstyle=\"font-size: 13px\" role=\"button\">\n\t\t\t\t${ category.name }\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\n\t\tthis.category_container.html(html);\n\t}\n};"],"names":["erpnext","ProductView","[object Object]","options","Object","assign","this","preference","view_type","make","from_filters","products_section","empty","prepare_toolbar","get_item_filter_data","append","prepare_search","prepare_view_toggler","frappe","require","ProductSearch","$","length","render_view_toggler","bind_view_toggler_actions","set_view_state","let","me","args","get_query_filters","disable_view_toggler","call","method","query_args","callback","result","exc","message","render_no_products_section","item_group","render_item_sub_categories","re_render_discount_filters","discount_filters","render_list_view","render_grid_view","products","product_count","bind_filters","restore_filters_state","add_paging_section","disable","prop","items","settings","prepare_product_area_wrapper","ProductGrid","ProductList","view","left_margin","top_margin","const","filters","utils","get_query_params","field_filters","JSON","parse","attribute_filters","start","remove","paging_html","query_params","cint","page_length","products_per_page","prev_disable","next_disable","__","bind_paging_action","forEach","icon","click","$btn","removeClass","addClass","localStorage","setItem","e","target","data","path","window","location","pathname","get_url_from_dict","href","filter_data","get_discount_filter_html","bind_discount_filter_action","restore_discount_filter","html","filter","selector","map","value","join","on","$checkbox","is_checked","is","push","filter_value","change_route_with_filters","attribute_name","attribute_value","v","filter_name","in_list","route_params","if_key_exists","query_string","get_query_string","stringify","history","pushState","fieldname","attribute","error","no_results_section","categories","sub_group_html","category","route","prepend","object","url","URLSearchParams","key","toString","obj","exists","prototype","hasOwnProperty","undefined","item","title","web_item_name","item_name","item_code","substr","get_image_html","get_card_body_html","image","website_image","get_abbr","body_html","get_title","has_variants","enable_wishlist","get_wishlist_icon","enabled","get_cart_indicator","formatted_price","get_price_html","get_stock_availability","get_primary_button","icon_class","wished","in_cart","price_html","formatted_mrp","replace","show_stock_availability","on_backorder","in_stock","allow_items_not_in_stock","enable_checkout","get_row_body_html","wishlist_enabled","image_html","get_title_html","get_item_details","title_html","details","short_description","MAX_RECENT_SEARCHES","searchBox","setupSearchDropDown","bindSearchAction","search_area","setupSearchResultContainer","populateRecentSearches","search_dropdown","searchEvent","closest","resultsEvent","isResultHidden","hasClass","query","populateResults","populateCategoriesList","product_results","category_results","category_container","isEmptyObject","setRecentSearches","find","setupCategoryContainer","setupProductsContainer","setupRecentsContainer","products_container","$recents_section","recents_container","getItem","chips","chip","addEventListener","innerText","trim","trigger","focus","recents","getRecentSearches","splice","indexOf","attachEventListenersToChips","res","thumbnail","brand"],"mappings":"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"}