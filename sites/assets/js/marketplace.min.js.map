{"version":3,"file":"marketplace.min.js","sources":["../../../apps/erpnext/erpnext/public/js/hub/components/ItemCard.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/EmptyState.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/ItemCardsContainer.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/SearchInput.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/DetailView.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/DetailHeaderItem.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/Image.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/vue-plugins.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Home.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Search.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Category.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/SavedItems.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/FeaturedItems.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/PublishedItems.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/Rating.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/ReviewTimelineItem.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/ReviewArea.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Item.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/reviews.js","../../../apps/erpnext/erpnext/public/js/hub/components/edit_details_dialog.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Seller.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/SellerItems.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/NotificationMessage.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Publish.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/item_publish_dialog.js","../../../apps/erpnext/erpnext/public/js/hub/components/ItemListCard.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Buying.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Selling.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/components/CommentInput.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/Messages.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/pages/NotFound.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/PageContainer.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/Sidebar.vue?rollup-plugin-vue=script.js","../../../apps/erpnext/erpnext/public/js/hub/marketplace.js","../../../apps/erpnext/erpnext/public/js/hub/hub_call.js","../../../apps/erpnext/erpnext/public/js/hub/components/profile_dialog.js"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tname: 'item-card',\n\tprops: ['item', 'item_id_fieldname', 'is_local', 'on_click', 'allow_clear', 'seen'],\n\tcomputed: {\n\t\ttitle() {\n\t\t\tconst item_name = this.item.item_name || this.item.name;\n\t\t\treturn strip_html(item_name);\n\t\t},\n\t\tsubtitle() {\n\t\t\tconst dot_spacer = '<span aria-hidden=\"true\"> · </span>';\n\t\t\tif(this.is_local){\n\t\t\t\treturn comment_when(this.item.creation);\n\t\t\t} else {\n\t\t\t\tlet subtitle_items = [comment_when(this.item.creation)];\n\t\t\t\tconst rating = this.item.average_rating;\n\n\t\t\t\tif (rating > 0) {\n\t\t\t\t\tsubtitle_items.push(rating + `<i class='fa fa-fw fa-star-o'></i>`)\n\t\t\t\t}\n\n\t\t\t\tsubtitle_items.push(this.item.company);\n\n\t\t\t\treturn subtitle_items.join(dot_spacer);\n\t\t\t}\n\t\t},\n\t\titem_id() {\n\t\t\treturn this.item[this.item_id_fieldname];\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tname: 'empty-state',\n\tprops: {\n\t\tmessage: String,\n\t\tbordered: Boolean,\n\t\theight: Number,\n\t\taction: Object,\n\t\tcentered: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ItemCard from './ItemCard.vue';\nimport EmptyState from './EmptyState.vue';\n\nexport default {\n\tname: 'item-cards-container',\n\tprops: {\n\t\tcontainer_name: String,\n\t\titems: Array,\n\t\titem_id_fieldname: String,\n\t\tis_local: Boolean,\n\t\ton_click: Function,\n\t\teditable: Boolean,\n\n\t\tempty_state_message: String,\n\t\tempty_state_action: Object,\n\t\tempty_state_height: Number,\n\t\tempty_state_bordered: Boolean\n\t},\n\tcomponents: {\n\t\tItemCard,\n\t\tEmptyState\n\t},\n\twatch: {\n\t\titems() {\n\t\t\t// TODO: handling doesn't work\n\t\t\tfrappe.dom.handle_broken_images($(this.$el));\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: {\n\t\tplaceholder: String,\n\t\tvalue: String,\n\t\ton_search: Function\n\t},\n\tmethods: {\n\t\ton_input(event) {\n\t\t\tthis.$emit('input', event.target.value);\n\t\t\tthis.on_search();\n\t\t}\n\t}\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tname: 'detail-view',\n\tprops: ['title', 'image', 'sections', 'show_skeleton', 'menu_items'],\n\tdata() {\n\t\treturn {\n\t\t\tback_to_home_text: __('Back to Home')\n\t\t}\n\t},\n\tcomputed: {}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nconst spacer = '<span aria-hidden=\"true\"> · </span>';\n\nexport default {\n\tname: 'detail-header-item',\n\tprops: ['value'],\n\tdata() {\n\t\treturn {\n\t\t\theader_items: this.value,\n\t\t\tspacer: spacer\n\t\t}\n\t},\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'Image',\n\tprops: ['src', 'alt'],\n\tdata() {\n\t\treturn {\n\t\t\tis_loading: true,\n\t\t\tis_broken: false\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.handle_image();\n\t},\n\tmethods: {\n\t\thandle_image() {\n\t\t\tlet img = new Image();\n\t\t\timg.src = this.src;\n\n\t\t\timg.onload = () => {\n\t\t\t\tthis.is_loading = false;\n\t\t\t};\n\t\t\timg.onerror = () => {\n\t\t\t\tthis.is_loading = false;\n\t\t\t\tthis.is_broken = true;\n\t\t\t};\n\t\t}\n\t}\n};\n","import Vue from 'vue/dist/vue.js';\n\n// Global components\nimport ItemCardsContainer from './components/ItemCardsContainer.vue';\nimport SectionHeader from './components/SectionHeader.vue';\nimport SearchInput from './components/SearchInput.vue';\nimport DetailView from './components/DetailView.vue';\nimport DetailHeaderItem from './components/DetailHeaderItem.vue';\nimport EmptyState from './components/EmptyState.vue';\nimport Image from './components/Image.vue';\n\nVue.prototype.__ = window.__;\nVue.prototype.frappe = window.frappe;\n\nVue.component('item-cards-container', ItemCardsContainer);\nVue.component('section-header', SectionHeader);\nVue.component('search-input', SearchInput);\nVue.component('detail-view', DetailView);\nVue.component('detail-header-item', DetailHeaderItem);\nVue.component('empty-state', EmptyState);\nVue.component('base-image', Image);\n\nVue.directive('route', {\n\tbind(el, binding) {\n\t\tconst route = binding.value;\n\t\tif (!route) return;\n\t\tel.classList.add('cursor-pointer');\n\t\tel.dataset.route = route;\n\t\tel.addEventListener('click', () => frappe.set_route(route));\n\t},\n\tunbind(el) {\n\t\tel.classList.remove('cursor-pointer');\n\t}\n});\n\nconst handleImage = (el, src) => {\n\tlet img = new Image();\n\t// add loading class\n\tel.src = '';\n\tel.classList.add('img-loading');\n\n\timg.onload = () => {\n\t\t// image loaded, remove loading class\n\t\tel.classList.remove('img-loading');\n\t\t// set src\n\t\tel.src = src;\n\t}\n\timg.onerror = () => {\n\t\tel.classList.remove('img-loading');\n\t\tel.classList.add('no-image');\n\t\tel.src = null;\n\t}\n\timg.src = src;\n}\n\nVue.filter('striphtml', function (text) {\n\treturn strip_html(text || '');\n});\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'home-page',\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\titem_id_fieldname: 'name',\n\t\t\tsearch_value: '',\n\n\t\t\tsections: [],\n\t\t\tshow_skeleton: true,\n\n\t\t\t// Constants\n\t\t\tsearch_placeholder: __('Search for anything ...'),\n\t\t};\n\t},\n\tcreated() {\n\t\t// refreshed\n\t\tthis.search_value = '';\n\t\tthis.get_items();\n\t},\n\tmounted() {\n\t\tfrappe.route.on('change', () => {\n\t\t\tif (frappe.get_route_str() === 'marketplace/home') {\n\t\t\t\tthis.get_items();\n\t\t\t}\n\t\t})\n\t},\n\tmethods: {\n\t\tget_items() {\n\t\t\thub.call('get_data_for_homepage', frappe.defaults ? {\n\t\t\t\tcountry: frappe.defaults.get_user_default('country')\n\t\t\t} : null)\n\t\t\t.then((data) => {\n\t\t\t\tthis.show_skeleton = false;\n\n\t\t\t\tthis.sections.push({\n\t\t\t\t\ttitle: __('Explore'),\n\t\t\t\t\titems: data.random_items\n\t\t\t\t});\n\t\t\t\tif (data.items_by_country.length) {\n\t\t\t\t\tthis.sections.push({\n\t\t\t\t\t\ttitle: __('Near you'),\n\t\t\t\t\t\titems: data.items_by_country\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst category_items = data.category_items;\n\n\t\t\t\tif (category_items) {\n\t\t\t\t\tObject.keys(category_items).map(category => {\n\t\t\t\t\t\tconst items = category_items[category];\n\n\t\t\t\t\t\tthis.sections.push({\n\t\t\t\t\t\t\ttitle: __(category),\n\t\t\t\t\t\t\texpandable: true,\n\t\t\t\t\t\t\titems\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t},\n\n\t\tset_search_route() {\n\t\t\tfrappe.set_route('marketplace', 'search', 'All', this.search_value);\n\t\t},\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\titems: [],\n\t\t\tcategory: frappe.get_route()[2],\n\t\t\tsearch_value: frappe.get_route()[3],\n\t\t\titem_id_fieldname: 'name',\n\t\t\tfilters: {},\n\n\t\t\t// Constants\n\t\t\tsearch_placeholder: __('Search for anything ...'),\n\t\t\tempty_state_message: __('')\n\t\t};\n\t},\n\tcomputed: {\n\t\tpage_title() {\n\t\t\treturn this.items.length\n\t\t\t\t? __('Results for \"{0}\" {1}', [\n\t\t\t\t\tthis.search_value,\n\t\t\t\t\tthis.category !== 'All' ? __('in category {0}', [this.category]) : ''\n\t\t\t\t  ])\n\t\t\t\t: __('No Items found.');\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_items();\n\t},\n\tmethods: {\n\t\tget_items() {\n\t\t\tif (this.category !== 'All') {\n\t\t\t\tthis.filters['hub_category'] = this.category;\n\t\t\t}\n\t\t\thub.call('get_items', {\n\t\t\t\tkeyword: this.search_value,\n\t\t\t\tfilters: this.filters\n\t\t\t})\n\t\t\t.then((items) => {\n\t\t\t\tthis.items = items;\n\t\t\t})\n\t\t},\n\n\t\tset_route_and_get_items() {\n\t\t\tfrappe.set_route('marketplace', 'search', this.category, this.search_value);\n\t\t\tthis.get_items();\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\tcategory: frappe.get_route()[2],\n\t\t\titems: [],\n\t\t\titem_id_fieldname: 'name',\n\n\t\t\t// Constants\n\t\t\tempty_state_message: __('No items in this category yet.'),\n\n\t\t\tsearch_value: '',\n\n\t\t\t// Constants\n\t\t\tsearch_placeholder: __('Search for anything ...'),\n\n\t\t};\n\t},\n\tcomputed: {\n\t\tpage_title() {\n\t\t\treturn __(this.category);\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.search_value = '';\n\t\tthis.get_items();\n\t},\n\tmethods: {\n\t\tget_items() {\n\t\t\thub.call('get_items', {\n\t\t\t\tfilters: {\n\t\t\t\t\thub_category: this.category\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((items) => {\n\t\t\t\tthis.items = items;\n\t\t\t})\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t},\n\n\t\tset_search_route() {\n\t\t\tfrappe.set_route('marketplace', 'search', this.category, this.search_value);\n\t\t},\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'saved-items-page',\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\titems: [],\n\t\t\titem_id_fieldname: 'name',\n\n\t\t\t// Constants\n\t\t\tpage_title: __('Saved Items'),\n\t\t\tempty_state_message: __('You have not saved any items yet.')\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.get_items();\n\t},\n\tmethods: {\n\t\tget_items() {\n\t\t\thub.call(\n\t\t\t\t'get_saved_items_of_user', {},\n\t\t\t\t'action:item_save'\n\t\t\t)\n\t\t\t.then((items) => {\n\t\t\t\tthis.items = items;\n\t\t\t})\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t},\n\n\t\ton_item_remove(hub_item_name) {\n\t\t\tconst grace_period = 5000;\n\t\t\tlet reverted = false;\n\t\t\tlet alert;\n\n\t\t\tconst undo_remove = () => {\n\t\t\t\tthis.toggle_item(hub_item_name);;\n\t\t\t\treverted = true;\n\t\t\t\talert.hide();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst item_name = this.items.filter(item => item.hub_item_name === hub_item_name);\n\n\t\t\talert = frappe.show_alert(`\n\t\t\t\t<span>\n\t\t\t\t\t${__('{0} removed.', [item_name], 'A specific Item has been removed.')}\n\t\t\t\t\t<a href=\"#\" data-action=\"undo-remove\">\n\t\t\t\t\t\t<b>${__('Undo', None, 'Undo removal of item.')}</b>\n\t\t\t\t\t</a>\n\t\t\t\t</span>`,\n\t\t\t\tgrace_period/1000,\n\t\t\t\t{\n\t\t\t\t\t'undo-remove': undo_remove.bind(this)\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.toggle_item(hub_item_name, false);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(!reverted) {\n\t\t\t\t\tthis.remove_item_from_saved_items(hub_item_name);\n\t\t\t\t}\n\t\t\t}, grace_period);\n\t\t},\n\n\t\tremove_item_from_saved_items(hub_item_name) {\n\t\t\terpnext.hub.trigger('action:item_save');\n\t\t\thub.call('remove_item_from_user_saved_items', {\n\t\t\t\thub_item_name,\n\t\t\t\thub_user: frappe.session.user\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.get_items();\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\t\t},\n\n\t\t// By default show\n\t\ttoggle_item(hub_item_name, show=true) {\n\t\t\tthis.items = this.items.map(item => {\n\t\t\t\tif(item.name === hub_item_name) {\n\t\t\t\t\titem.seen = show;\n\t\t\t\t}\n\t\t\t\treturn item;\n\t\t\t});\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'featured-items-page',\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\titems: [],\n\t\t\titem_id_fieldname: 'name',\n\n\t\t\t// Constants\n\t\t\tpage_title: __('Your Featured Items'),\n\t\t\tempty_state_message: __('No featured items yet. Got to your {0} and feature up to eight items that you want to highlight to your customers.',\n\t\t\t\t[`<a href=\"#marketplace/published-items\">${__(\"Published Items\")}</a>`])\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.get_items();\n\t},\n\tmethods: {\n\t\tget_items() {\n\t\t\thub.call(\n\t\t\t\t'get_featured_items_of_seller', {},\n\t\t\t\t'action:item_feature'\n\t\t\t)\n\t\t\t.then((items) => {\n\t\t\t\tthis.items = items;\n\t\t\t})\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t},\n\n\t\ton_item_remove(hub_item_name) {\n\t\t\tconst grace_period = 5000;\n\t\t\tlet reverted = false;\n\t\t\tlet alert;\n\n\t\t\tconst undo_remove = () => {\n\t\t\t\tthis.toggle_item(hub_item_name);;\n\t\t\t\treverted = true;\n\t\t\t\talert.hide();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst item_name = this.items.filter(item => item.hub_item_name === hub_item_name);\n\n\t\t\talert_message = __('{0} removed. {1}', [item_name,\n\t\t\t\t`<a href=\"#\" data-action=\"undo-remove\"><b>${__('Undo')}</b></a>`]);\n\t\t\talert = frappe.show_alert(alert_message, grace_period / 1000,\n\t\t\t\t{\n\t\t\t\t\t'undo-remove': undo_remove.bind(this)\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.toggle_item(hub_item_name, false);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(!reverted) {\n\t\t\t\t\tthis.remove_item_from_featured_items(hub_item_name);\n\t\t\t\t}\n\t\t\t}, grace_period);\n\t\t},\n\n\t\tremove_item_from_featured_items(hub_item_name) {\n\t\t\terpnext.hub.trigger('action:item_feature');\n\t\t\thub.call('remove_item_from_seller_featured_items', {\n\t\t\t\thub_item_name,\n\t\t\t\thub_user: frappe.session.user\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.get_items();\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\t\t},\n\n\t\t// By default show\n\t\ttoggle_item(hub_item_name, show=true) {\n\t\t\tthis.items = this.items.map(item => {\n\t\t\t\tif(item.name === hub_item_name) {\n\t\t\t\t\titem.seen = show;\n\t\t\t\t}\n\t\t\t\treturn item;\n\t\t\t});\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\titems: [],\n\t\t\titem_id_fieldname: 'name',\n\n\t\t\tpublish_page_action: {\n\t\t\t\tlabel: __('Publish Your First Items'),\n\t\t\t\ton_click: () => {\n\t\t\t\t\tfrappe.set_route(`marketplace/publish`);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.get_items();\n\t},\n\tmethods: {\n\t\tget_items() {\n\t\t\thub.call('get_items', {\n\t\t\t\tfilters: {\n\t\t\t\t\thub_seller: hub.settings.hub_seller_name\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((items) => {\n\t\t\t\tthis.items = items;\n\t\t\t})\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    props: ['rating', 'max_rating']\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Rating from '../components/Rating.vue';\n\nexport default {\n    props: ['username', 'comment_when', 'avatar', 'rating', 'subject', 'content'],\n    components: {\n        Rating\n    }\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ReviewTimelineItem from '../components/ReviewTimelineItem.vue';\n\nexport default {\n\tprops: ['hub_item_name'],\n\tdata() {\n\t\treturn {\n\t\t\tuser_review: {\n\t\t\t\trating: 0,\n\t\t\t\tsubject: '',\n\t\t\t\tcontent: ''\n\t\t\t},\n\t\t\treviews: []\n\t\t}\n\t},\n\tcomponents: {\n\t\tReviewTimelineItem\n\t},\n\tcreated() {\n\t\tthis.get_item_reviews();\n\t},\n\tmounted() {\n\t\tthis.make_input();\n\t},\n\tmethods: {\n\t\tset_rating(i) {\n\t\t\tthis.user_review.rating = i;\n\t\t},\n\n\t\twhen(datetime) {\n\t\t\treturn comment_when(datetime);\n\t\t},\n\n\t\tget_item_reviews() {\n\t\t\thub.call('get_item_reviews', { hub_item_name: this.hub_item_name })\n\t\t\t\t.then(reviews => {\n\t\t\t\t\tthis.reviews = reviews;\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\n\t\tmake_input() {\n\t\t\tthis.review_content = frappe.ui.form.make_control({\n\t\t\t\tparent: this.$refs['review-content'],\n\t\t\t\ton_submit: this.on_submit_review.bind(this),\n\t\t\t\tno_wrapper: true,\n\t\t\t\tonly_input: true,\n\t\t\t\trender_input: true,\n\t\t\t\tdf: {\n\t\t\t\t\tfieldtype: 'Comment',\n\t\t\t\t\tfieldname: 'comment'\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\ton_submit_review() {\n\t\t\tconst review = Object.assign({}, this.user_review, {\n\t\t\t\tcontent: this.review_content.get_value()\n\t\t\t});\n\n\t\t\tif (!hub.is_seller_registered()) {\n\t\t\t\tfrappe.throw(__('You need to login as a Marketplace User before you can add any reviews.'));\n\t\t\t}\n\n\t\t\thub.call('add_item_review', {\n\t\t\t\thub_item_name: this.hub_item_name,\n\t\t\t\treview: JSON.stringify(review)\n\t\t\t})\n\t\t\t.then(this.push_review.bind(this));\n\n\t\t\tthis.reset_user_review();\n\t\t},\n\n\t\treset_user_review() {\n\t\t\tthis.user_review.rating = 0;\n\t\t\tthis.user_review.subject = '';\n\t\t\tthis.review_content.set_value('');\n\t\t},\n\n\t\tpush_review(review){\n\t\t\tthis.reviews.unshift(review);\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ReviewArea from '../components/ReviewArea.vue';\nimport { get_rating_html } from '../components/reviews';\nimport { edit_details_dialog } from '../components/edit_details_dialog';\n\nexport default {\n\tname: 'item-page',\n\tcomponents: {\n\t\tReviewArea\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\thub_item_name: frappe.get_route()[2],\n\n\t\t\tinit: true,\n\n\t\t\titem: null,\n\t\t\ttitle: null,\n\t\t\timage: null,\n\t\t\tsections: []\n\t\t};\n\t},\n\tcomputed: {\n\t\tis_own_item() {\n\t\t\tlet is_own_item = false;\n\t\t\tif (this.item) {\n\t\t\t\tif (this.item.hub_seller === hub.settings.hub_seller_name) {\n\t\t\t\t\tis_own_item = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn is_own_item;\n\t\t},\n\t\tmenu_items() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Save Item'),\n\t\t\t\t\tcondition: hub.is_user_registered() && !this.is_own_item,\n\t\t\t\t\taction: this.add_to_saved_items\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Add to Featured Item'),\n\t\t\t\t\tcondition: hub.is_user_registered() && this.is_own_item,\n\t\t\t\t\taction: this.add_to_featured_items\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Report this Item'),\n\t\t\t\t\tcondition: !this.is_own_item,\n\t\t\t\t\taction: this.report_item\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Edit Details'),\n\t\t\t\t\tcondition: hub.is_user_registered() && this.is_own_item,\n\t\t\t\t\taction: this.edit_details\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Unpublish Item'),\n\t\t\t\t\tcondition: hub.is_user_registered() && this.is_own_item,\n\t\t\t\t\taction: this.unpublish_item\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\n\t\titem_subtitle() {\n\t\t\tif (!this.item) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst dot_spacer = '<span aria-hidden=\"true\"> · </span>';\n\t\t\tlet subtitle_items = [comment_when(this.item.creation)];\n\t\t\tconst rating = this.item.average_rating;\n\n\t\t\tif (rating > 0) {\n\t\t\t\tsubtitle_items.push(rating + `<i class='fa fa-fw fa-star-o'></i>`);\n\t\t\t}\n\n\t\t\tsubtitle_items.push({\n\t\t\t\tvalue: this.item.company,\n\t\t\t\ton_click: this.go_to_seller_profile_page\n\t\t\t});\n\n\t\t\treturn subtitle_items;\n\t\t},\n\n\t\titem_views_and_ratings() {\n\t\t\tif (!this.item) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet stats = __('No views yet');\n\t\t\tif (this.item.view_count) {\n\t\t\t\tconst views_message = __('{0} Views', [this.item.view_count]);\n\n\t\t\t\tconst rating_html = get_rating_html(this.item.average_rating);\n\t\t\t\tconst rating_count =\n\t\t\t\t\tthis.item.no_of_ratings > 0\n\t\t\t\t\t\t? __('{0} reviews', [this.item.no_of_ratings])\n\t\t\t\t\t\t: __('No reviews yet');\n\n\t\t\t\tstats = [views_message, rating_html, rating_count];\n\t\t\t}\n\n\t\t\treturn stats;\n\t\t},\n\n\t\tprimary_action() {\n\t\t\tif (hub.is_user_registered()) {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: __('Contact Seller'),\n\t\t\t\t\taction: this.contact_seller.bind(this)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_item_details();\n\t},\n\tmounted() {\n\t\t// To record a single view per session, (later)\n\t\t// erpnext.hub.item_view_cache = erpnext.hub.item_view_cache || [];\n\t\t// if (erpnext.hub.item_view_cache.includes(this.hub_item_name)) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tthis.item_received.then(() => {\n\t\t\tsetTimeout(() => {\n\t\t\t\thub.call('add_item_view', {\n\t\t\t\t\thub_item_name: this.hub_item_name\n\t\t\t\t});\n\t\t\t\t// .then(() => {\n\t\t\t\t// \terpnext.hub.item_view_cache.push(this.hub_item_name);\n\t\t\t\t// });\n\t\t\t}, 5000);\n\t\t});\n\t},\n\tmethods: {\n\t\tget_item_details() {\n\t\t\tthis.item_received = hub\n\t\t\t\t.call('get_item_details', { hub_item_name: this.hub_item_name })\n\t\t\t\t.then(item => {\n\t\t\t\t\tthis.init = false;\n\t\t\t\t\tthis.item = item;\n\n\t\t\t\t\tthis.build_data();\n\t\t\t\t\tthis.make_dialogs();\n\t\t\t\t});\n\t\t},\n\t\tgo_to_seller_profile_page(seller_name) {\n\t\t\tfrappe.set_route(`marketplace/seller/${seller_name}`);\n\t\t},\n\t\tbuild_data() {\n\t\t\tthis.title = this.item.item_name || this.item.name;\n\t\t\tthis.image = this.item.image;\n\n\t\t\tthis.sections = [\n\t\t\t\t{\n\t\t\t\t\ttitle: __('Item Description'),\n\t\t\t\t\tcontent: this.item.description\n\t\t\t\t\t\t? __(this.item.description)\n\t\t\t\t\t\t: __('No description')\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: __('Seller Information'),\n\t\t\t\t\tcontent: this.item.seller_description\n\t\t\t\t\t\t? __(this.item.seller_description)\n\t\t\t\t\t\t: __('No description')\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\n\t\tmake_dialogs() {\n\t\t\tthis.make_contact_seller_dialog();\n\t\t\tthis.make_report_item_dialog();\n\t\t\tthis.make_editing_dialog();\n\t\t},\n\n\t\tadd_to_saved_items() {\n\t\t\thub.call('add_item_to_user_saved_items', {\n\t\t\t\t\thub_item_name: this.hub_item_name,\n\t\t\t\t\thub_user: frappe.session.user\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tconst saved_items_link = `<b><a href=\"#marketplace/saved-items\">${__('Saved')}</a></b>`;\n\t\t\t\t\tfrappe.show_alert(saved_items_link);\n\t\t\t\t\terpnext.hub.trigger('action:item_save');\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t},\n\n\t\tadd_to_featured_items() {\n\t\t\thub.call('add_item_to_seller_featured_items', {\n\t\t\t\t\thub_item_name: this.hub_item_name,\n\t\t\t\t\thub_user: frappe.session.user\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tconst featured_items_link = `<b><a href=\"#marketplace/featured-items\">${__('Added to Featured Items')}</a></b>`;\n\t\t\t\t\tfrappe.show_alert(featured_items_link);\n\t\t\t\t\terpnext.hub.trigger('action:item_feature');\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t},\n\n\t\tmake_contact_seller_dialog() {\n\t\t\tthis.contact_seller_dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Send a message'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: 'to',\n\t\t\t\t\t\tfieldtype: 'Read Only',\n\t\t\t\t\t\tlabel: __('To'),\n\t\t\t\t\t\tdefault: this.item.company\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Text',\n\t\t\t\t\t\tfieldname: 'message',\n\t\t\t\t\t\tlabel: __('Message')\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: ({ message }) => {\n\t\t\t\t\tif (!message) return;\n\n\t\t\t\t\thub.call('send_message', {\n\t\t\t\t\t\t\thub_item: this.item.name,\n\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.contact_seller_dialog.hide();\n\t\t\t\t\t\t\tfrappe.set_route('marketplace', 'buying', this.item.name);\n\t\t\t\t\t\t\terpnext.hub.trigger('action:send_message');\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tmake_report_item_dialog() {\n\t\t\tthis.report_item_dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Report Item'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __('Why do think this Item should be removed?'),\n\t\t\t\t\t\tfieldtype: 'Text',\n\t\t\t\t\t\tfieldname: 'message'\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: ({ message }) => {\n\t\t\t\t\thub.call('add_reported_item', {\n\t\t\t\t\t\t\thub_item_name: this.item.name,\n\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\tfrappe.show_alert(__('Item Reported'));\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tmake_editing_dialog() {\n\t\t\tthis.edit_dialog = edit_details_dialog({\n\t\t\t\tprimary_action: {\n\t\t\t\t\tfn: values => {\n\t\t\t\t\t\tthis.update_details(values);\n\t\t\t\t\t\tthis.edit_dialog.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdefaults: {\n\t\t\t\t\titem_name: this.item.item_name,\n\t\t\t\t\thub_category: this.item.hub_category,\n\t\t\t\t\tdescription: this.item.description\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdate_details(values) {\n\t\t\tfrappe.call('erpnext.hub_node.api.update_item', {\n\t\t\t\t\tref_doc: this.item.name,\n\t\t\t\t\tdata: values\n\t\t\t\t})\n\t\t\t\t.then(r => {\n\t\t\t\t\treturn this.get_item_details();\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tfrappe.show_alert(__('{0} Updated', [this.item.item_name]));\n\t\t\t\t});\n\t\t},\n\n\t\tcontact_seller() {\n\t\t\tthis.contact_seller_dialog.show();\n\t\t},\n\n\t\treport_item() {\n\t\t\tif (!hub.is_seller_registered()) {\n\t\t\t\tfrappe.throw(\n\t\t\t\t\t__('Please login as a Marketplace User to report this item.')\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.report_item_dialog.show();\n\t\t},\n\n\t\tedit_details() {\n\t\t\tif (!hub.is_seller_registered()) {\n\t\t\t\tfrappe.throw(\n\t\t\t\t\t__('Please login as a Marketplace User to edit this item.')\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.edit_dialog.show();\n\t\t},\n\n\t\tunpublish_item() {\n\t\t\tfrappe.confirm(__('Unpublish {0}?', [this.item.item_name]), () => {\n\t\t\t\tfrappe\n\t\t\t\t\t.call('erpnext.hub_node.api.unpublish_item', {\n\t\t\t\t\t\titem_code: this.item.item_code,\n\t\t\t\t\t\thub_item_name: this.hub_item_name\n\t\t\t\t\t})\n\t\t\t\t\t.then(r => {\n\t\t\t\t\t\tfrappe.set_route(`marketplace/home`);\n\t\t\t\t\t\tfrappe.show_alert(__('Item listing removed'));\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n};\n","function get_review_html(review) {\n\tlet username = review.username || review.user || __(\"Anonymous\");\n\n\tlet image_html = review.user_image\n\t\t? `<div class=\"avatar-frame\" style=\"background-image: url(${review.user_image})\"></div>`\n\t\t: `<div class=\"standard-image\" style=\"background-color: #fafbfc\">${frappe.get_abbr(username)}</div>`\n\n\tlet edit_html = review.own\n\t\t? `<div class=\"pull-right hidden-xs close-btn-container\">\n\t\t\t<span class=\"small text-muted\">\n\t\t\t\t${'data.delete'}\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"pull-right edit-btn-container\">\n\t\t\t<span class=\"small text-muted\">\n\t\t\t\t${'data.edit'}\n\t\t\t</span>\n\t\t</div>`\n\t\t: '';\n\n\tlet rating_html = get_rating_html(review.rating);\n\n\treturn get_timeline_item(review, image_html, edit_html, rating_html);\n}\n\nfunction get_timeline_item(data, image_html, edit_html, rating_html) {\n\treturn `<div class=\"media timeline-item user-content\" data-doctype=\"${''}\" data-name=\"${''}\">\n\t\t<span class=\"pull-left avatar avatar-medium hidden-xs\" style=\"margin-top: 1px\">\n\t\t\t${image_html}\n\t\t</span>\n\t\t<div class=\"pull-left media-body\">\n\t\t\t<div class=\"media-content-wrapper\">\n\t\t\t\t<div class=\"action-btns\">${edit_html}</div>\n\n\t\t\t\t<div class=\"comment-header clearfix\">\n\t\t\t\t\t<span class=\"pull-left avatar avatar-small visible-xs\">\n\t\t\t\t\t\t${image_html}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<div class=\"asset-details\">\n\t\t\t\t\t\t<span class=\"author-wrap\">\n\t\t\t\t\t\t\t<i class=\"octicon octicon-quote hidden-xs fa-fw\"></i>\n\t\t\t\t\t\t\t<span>${data.username}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<a class=\"text-muted\">\n\t\t\t\t\t\t\t<span class=\"text-muted hidden-xs\">&ndash;</span>\n\t\t\t\t\t\t\t<span class=\"hidden-xs\">${comment_when(data.modified)}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"reply timeline-content-show\">\n\t\t\t\t\t<div class=\"timeline-item-content\">\n\t\t\t\t\t\t<p class=\"text-muted\">\n\t\t\t\t\t\t\t${rating_html}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<h6 class=\"bold\">${data.subject}</h6>\n\t\t\t\t\t\t<p class=\"text-muted\">\n\t\t\t\t\t\t\t${data.content}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`;\n}\n\nfunction get_rating_html(rating) {\n\tlet rating_html = ``;\n\tfor (var i = 0; i < 5; i++) {\n\t\tlet star_class = 'fa-star';\n\t\tif (i >= rating) star_class = 'fa-star-o';\n\t\trating_html += `<i class='fa fa-fw ${star_class} star-icon' data-index=${i}></i>`;\n\t}\n\treturn rating_html;\n}\n\nexport {\n\tget_review_html,\n    get_rating_html\n}\n","function edit_details_dialog(params) {\n\tlet dialog = new frappe.ui.Dialog({\n\t\ttitle: __('Update Details'),\n\t\tfields: [\n\t\t\t{\n\t\t\t\tlabel: 'Item Name',\n\t\t\t\tfieldname: 'item_name',\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\tdefault: params.defaults.item_name,\n\t\t\t\treqd: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Hub Category',\n\t\t\t\tfieldname: 'hub_category',\n\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\tdefault: params.defaults.hub_category,\n\t\t\t\toptions: [],\n\t\t\t\treqd: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Description',\n\t\t\t\tfieldname: 'description',\n\t\t\t\tfieldtype: 'Text',\n\t\t\t\tdefault: params.defaults.description,\n\t\t\t\toptions: [],\n\t\t\t\treqd: 1\n\t\t\t}\n\t\t],\n\t\tprimary_action_label: params.primary_action.label || __('Update Details'),\n\t\tprimary_action: params.primary_action.fn\n\t});\n\n\thub.call('get_categories').then(categories => {\n\t\tcategories = categories.map(d => d.name);\n\t\tdialog.fields_dict.hub_category.set_data(categories);\n\t});\n\n\treturn dialog;\n}\n\nexport { edit_details_dialog };\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Rating from '../components/Rating.vue';\n\n\nexport default {\n\tname: 'seller-page',\n\tcomponents: {\n        Rating\n    },\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\tseller_company: frappe.get_route()[2],\n\t\t\thub_seller: null,\n\n\t\t\tinit: true,\n\n\t\t\tprofile: null,\n\t\t\titems:[],\n\t\t\trecent_seller_reviews: [],\n\t\t\tseller_product_view_stats: [],\n\t\t\tseller_traffic_chart: null,\n\t\t\titem_id_fieldname: 'name',\n\t\t\titem_container_heading: 'Items',\n\n\t\t\ttitle: null,\n\t\t\timage: null,\n\t\t\tsections: [],\n\n\t\t\tcountry: '',\n\t\t\tsite_name: '',\n\t\t\tjoined_when: '',\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.get_seller_profile_and_items();\n\t},\n\tcomputed: {\n\t\tis_own_company() {\n\t\t\tlet is_own_company = false;\n\t\t\tif(this.hub_seller) {\n\t\t\t\tif(this.hub_seller === hub.settings.hub_seller_name) {\n\t\t\t\t\tis_own_company = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn is_own_company;\n\t\t},\n\t},\n\tmethods: {\n\t\tcomment_when(timestamp){\n\t\t\treturn comment_when(timestamp)\n\t\t},\n\t\tis_user_registered(){\n\t\t\treturn hub.is_user_registered()\n\t\t},\n\t\tget_seller_profile_and_items() {\n\t\t\tlet post_data = {company: this.seller_company}\n\t\t\tif (this.page_name == 'profile'){\n\t\t\t\tthis.seller_company = null;\n\t\t\t\tthis.hub_seller = hub.settings.hub_seller_name\n\t\t\t\tpost_data = {hub_seller: this.hub_seller}\n\t\t\t}\n\t\t\thub.call('get_hub_seller_page_info', post_data)\n\t\t\t.then(data => {\n\t\t\t\tthis.init = false;\n\t\t\t\tthis.profile = data.profile;\n\t\t\t\tthis.items = data.items;\n\t\t\t\tthis.item_container_heading = data.is_featured_item ? __('Featured Items') : __('Popular Items');\n\t\t\t\tthis.hub_seller = this.items[0].hub_seller;\n\t\t\t\tthis.recent_seller_reviews = data.recent_seller_reviews;\n\t\t\t\tthis.seller_product_view_stats = data.seller_product_view_stats;\n\n\t\t\t\tconst profile = this.profile;\n\n\t\t\t\tthis.title = profile.company;\n\n\t\t\t\tthis.country = __(profile.country);\n\t\t\t\tthis.site_name = __(profile.site_name);\n\t\t\t\tthis.joined_when = __('Joined {0}', [comment_when(profile.creation)]);\n\n\t\t\t\tthis.image = profile.logo;\n\t\t\t\tthis.sections = [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: __('About the Company'),\n\t\t\t\t\t\tcontent: profile.company_description\n\t\t\t\t\t\t\t? __(profile.company_description)\n\t\t\t\t\t\t\t: __('No description')\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\t\tsetTimeout(() => this.init_seller_traffic_chart(), 1);\n\n\t\t\t});\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t},\n\t\tgo_to_seller_items_page(hub_seller) {\n\t\t\tfrappe.set_route(`marketplace/seller/${hub_seller}/items`);\n\t\t},\n\t\tinit_seller_traffic_chart() {\n\t\t\tlet lables = []\n\t\t\tlet tooltip_lables = {}\n\t\t\tlet datasets = [{name:\"Product Views\",chartType: 'line',values: []}]\n\t\t\tthis.seller_product_view_stats.map((stat) => {\n\t\t\t\tlables.push(stat.date.substring(5));\n\t\t\t\ttooltip_lables[stat.date.substring(5)] = new Date(stat.date).toDateString();\n\t\t\t\tdatasets[0].values.push(stat.view_count);\n\t\t\t});\n\t\t\tlet data = {labels: lables, datasets:datasets, tooltip_lables:tooltip_lables}\n\t\t\tthis.seller_traffic_chart = new Chart( \"#seller_traffic_chart\", { // or DOM element\n\t\t\tdata: data,\n\n\t\t\ttitle: \"Daily Product Views\",\n\t\t\ttype: 'axis-mixed', // or 'bar', 'line', 'pie', 'percentage'\n\t\t\theight: 300,\n\t\t\tcolors: ['purple', '#ffa3ef', 'light-blue'],\n\n\t\t\ttooltipOptions: {\n\t\t\tformatTooltipX: d => this.seller_traffic_chart.data.tooltip_lables[d],\n\t\t\tformatTooltipY: d => d + ' Views',\n\t\t\t}\n\t\t});\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'seller-items-page',\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\tseller_company: frappe.get_route()[2],\n\n\t\t\tinit: true,\n\t\t\titems:[],\n\t\t\titem_id_fieldname: 'name',\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.get_seller_and_items();\n\t},\n\tcomputed: {\n\t\titem_container_heading() {\n\t\t\treturn __('Items by ' + this.seller_company);\n\t\t}\n\t},\n\tmethods: {\n\t\tget_seller_and_items() {\n\t\t\thub.call(\n\t\t\t\t'get_items',\n\t\t\t\t{ company: this.seller_company }\n\t\t\t).then(data => {\n\t\t\t\tthis.init = false;\n\t\t\t\tthis.items = data;\n\t\t\t});\n\t\t},\n\n\t\tgo_to_item_details_page(hub_item_name) {\n\t\t\tfrappe.set_route(`marketplace/item/${hub_item_name}`);\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tname: 'notification-message',\n\tprops: {\n\t\tmessage: String,\n    }\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport NotificationMessage from '../components/NotificationMessage.vue';\nimport { ItemPublishDialog } from '../components/item_publish_dialog';\n\nexport default {\n\tname: 'publish-page',\n\tcomponents: {\n\t\tNotificationMessage\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: frappe.get_route()[1],\n\t\t\tvalid_items: [],\n\t\t\tselected_items: [],\n\t\t\titems_data_to_publish: {},\n\t\t\tsearch_value: '',\n\t\t\titem_id_fieldname: 'item_code',\n\n\t\t\t// Constants\n\t\t\t// TODO: multiline translations don't work\n\t\t\tpage_title: __('Publish Items'),\n\t\t\tsearch_placeholder: __('Search Items ...'),\n\t\t\tempty_state_message: __('No Items selected yet. Browse and click on items below to publish.'),\n\t\t\tvalid_items_instruction: __('Only items with an image and description can be published. Please update them if an item in your inventory does not appear.'),\n\t\t\tlast_sync_message: (hub.settings.last_sync_datetime)\n\t\t\t\t? __('Last sync was {0}.', [`<a href=\"#marketplace/profile\">${comment_when(hub.settings.last_sync_datetime)}</a>`]) +\n\t\t\t\t  ` <a href=\"#marketplace/published-items\">${__('See your Published Items.')}</a>`\n\t\t\t\t: ''\n\t\t};\n\t},\n\tcomputed: {\n\t\tno_selected_items() {\n\t\t\treturn this.selected_items.length === 0;\n\t\t},\n\n\t\tpublish_button_text() {\n\t\t\tconst number = this.selected_items.length;\n\t\t\tlet text = __('Publish');\n\t\t\tif(number === 1) {\n\t\t\t\ttext = __('Publish 1 Item');\n\t\t\t}\n\t\t\tif(number > 1) {\n\t\t\t\ttext = __('Publish {0} Items', [number]);\n\t\t\t}\n\t\t\treturn text;\n\t\t},\n\n\t\titems_dict() {\n\t\t\tlet items_dict = {};\n\t\t\tthis.valid_items.map(item => {\n\t\t\t\titems_dict[item[this.item_id_fieldname]] = item\n\t\t\t})\n\n\t\t\treturn items_dict;\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.get_valid_items();\n\t\tthis.make_publishing_dialog();\n\t},\n\tmethods: {\n\t\tget_valid_items() {\n\t\t\tfrappe.call(\n\t\t\t\t'erpnext.hub_node.api.get_valid_items',\n\t\t\t\t{\n\t\t\t\t\tsearch_value: this.search_value\n\t\t\t\t}\n\t\t\t)\n\t\t\t.then((r) => {\n\t\t\t\tthis.valid_items = r.message;\n\t\t\t})\n\t\t},\n\n\t\tpublish_selected_items() {\n\t\t\tfrappe.call(\n\t\t\t'erpnext.hub_node.api.publish_selected_items',\n\t\t\t\t{\n\t\t\t\t\titems_to_publish: this.selected_items\n\t\t\t\t}\n\t\t\t)\n\t\t\t.then((r) => {\n\t\t\t\tthis.selected_items = [];\n\t\t\t\treturn frappe.db.get_doc('Marketplace Settings');\n\t\t\t})\n\t\t\t.then(doc => {\n\t\t\t\thub.settings = doc;\n\t\t\t\tthis.add_last_sync_message();\n\t\t\t});\n\t\t},\n\n\t\tadd_last_sync_message() {\n\t\t\tthis.last_sync_message = __('Last sync was {0}.',\n\t\t\t\t[`<a href=\"#marketplace/profile\">${comment_when(hub.settings.last_sync_datetime)}</a>`]\n\t\t\t) + `<a href=\"#marketplace/published-items\">${__('See your Published Items')}</a>.`;\n\t\t},\n\n\t\tclear_last_sync_message() {\n\t\t\tthis.last_sync_message = '';\n\t\t},\n\n\t\tremove_item_from_selection(item_code) {\n\t\t\tthis.selected_items = this.selected_items\n\t\t\t\t.filter(item => item.item_code !== item_code);\n\t\t},\n\n\t\tmake_publishing_dialog() {\n\t\t\tthis.item_publish_dialog = ItemPublishDialog(\n\t\t\t\t{\n\t\t\t\t\tfn: (values) => {\n\t\t\t\t\t\tthis.add_item_to_publish(values);\n\t\t\t\t\t\tthis.item_publish_dialog.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfn: () => {\n\t\t\t\t\t\tconst values = this.item_publish_dialog.get_values(true);\n\t\t\t\t\t\tthis.update_items_data_to_publish(values);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tadd_item_to_publish(values) {\n\t\t\tthis.update_items_data_to_publish(values);\n\n\t\t\tconst item_code  = values.item_code;\n\t\t\tlet item_doc = this.items_dict[item_code];\n\n\t\t\tconst item_to_publish = Object.assign({}, item_doc, values);\n\t\t\tthis.selected_items.push(item_to_publish);\n\t\t},\n\n\t\tupdate_items_data_to_publish(values) {\n\t\t\tthis.items_data_to_publish[values.item_code] = values;\n\t\t},\n\n\t\tshow_publishing_dialog_for_item(item_code) {\n\t\t\tlet item_data = this.items_data_to_publish[item_code];\n\t\t\tif(!item_data) { item_data = { item_code }; };\n\n\t\t\tthis.item_publish_dialog.clear();\n\n\t\t\tconst item_doc = this.items_dict[item_code];\n\t\t\tif(item_doc) {\n\t\t\t\tthis.item_publish_dialog.fields_dict.image_list.set_data(\n\t\t\t\t\titem_doc.attachments.map(attachment => attachment.file_url)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.item_publish_dialog.set_values(item_data);\n\t\t\tthis.item_publish_dialog.show();\n\t\t}\n\t}\n}\n","function ItemPublishDialog(primary_action, secondary_action) {\n\tlet dialog = new frappe.ui.Dialog({\n\t\ttitle: __('Edit Publishing Details'),\n\t\tfields: [\n\t\t\t{\n\t\t\t\tlabel: __('Item Code'),\n\t\t\t\tfieldname: 'item_code',\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\tread_only: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Hub Category'),\n\t\t\t\tfieldname: 'hub_category',\n\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\toptions: [],\n\t\t\t\treqd: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Images'),\n\t\t\t\tfieldname: 'image_list',\n\t\t\t\tfieldtype: 'MultiSelect',\n\t\t\t\toptions: [],\n\t\t\t\treqd: 1\n\t\t\t}\n\t\t],\n\t\tprimary_action_label: primary_action.label || __('Set Details'),\n\t\tprimary_action: primary_action.fn,\n\t\tsecondary_action: secondary_action.fn\n\t});\n\n\thub.call('get_categories').then(categories => {\n\t\tcategories = categories.map(d => d.name);\n\t\tdialog.fields_dict.hub_category.set_data(categories);\n\t});\n\n\treturn dialog;\n}\n\nexport { ItemPublishDialog };\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['item', 'message']\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport EmptyState from '../components/EmptyState.vue';\nimport SectionHeader from '../components/SectionHeader.vue';\nimport ItemListCard from '../components/ItemListCard.vue';\n\nexport default {\n\tcomponents: {\n\t\tSectionHeader,\n\t\tItemListCard,\n\t\tEmptyState\n\t},\n\tdata() {\n\t\treturn {\n\t\t\titems: null\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_items_for_messages()\n\t\t\t.then(items => {\n\t\t\t\tthis.items = items;\n\t\t\t});\n\t},\n\tmethods: {\n\t\tget_items_for_messages() {\n\t\t\treturn hub.call('get_buying_items_for_messages', {}, 'action:send_message');\n\t\t},\n\t\tget_sender(message) {\n\t\t\treturn message.sender === frappe.session.user ? __('You') : (message.sender_name || message.sender);\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport EmptyState from '../components/EmptyState.vue';\nimport SectionHeader from '../components/SectionHeader.vue';\nimport ItemListCard from '../components/ItemListCard.vue';\n\nexport default {\n\tcomponents: {\n\t\tSectionHeader,\n\t\tItemListCard,\n\t\tEmptyState\n\t},\n\tdata() {\n\t\treturn {\n\t\t\titems: null\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_items_for_messages()\n\t\t\t.then(items => {\n\t\t\t\tthis.items = items;\n\t\t\t});\n\t},\n\tmethods: {\n\t\tget_items_for_messages() {\n\t\t\treturn hub.call('get_selling_items_for_messages');\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tmounted() {\n\t\tthis.make_input();\n\t},\n\tmethods: {\n\t\tmake_input() {\n\t\t\tthis.message_input = frappe.ui.form.make_control({\n\t\t\t\tparent: this.$refs['comment-input'],\n\t\t\t\ton_submit: (message) => {\n\t\t\t\t\tthis.message_input.reset();\n\t\t\t\t\tthis.$emit('change', message);\n\t\t\t\t},\n\t\t\t\tonly_input: true,\n\t\t\t\tno_wrapper: true\n\t\t\t});\n\t\t},\n\t\tsubmit_input() {\n\t\t\tif (!this.message_input) return;\n\t\t\tconst value = this.message_input.get_value();\n\t\t\tif (!value) return;\n\t\t\tthis.message_input.submit();\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport CommentInput from '../components/CommentInput.vue';\nimport ItemListCard from '../components/ItemListCard.vue';\n\nexport default {\n\tcomponents: {\n\t\tCommentInput,\n\t\tItemListCard\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmessage_type: frappe.get_route()[1],\n\t\t\titem_details: null,\n\t\t\tmessages: []\n\t\t}\n\t},\n\tcreated() {\n\t\tconst hub_item_name = this.get_hub_item_name();\n\t\tthis.get_item_details(hub_item_name)\n\t\t\t.then(item_details => {\n\t\t\t\tthis.item_details = item_details;\n\t\t\t\tthis.get_messages()\n\t\t\t\t\t.then(messages => {\n\t\t\t\t\t\tthis.messages = messages;\n\t\t\t\t\t});\n\t\t\t});\n\t},\n\tcomputed: {\n\t\tback_link() {\n\t\t\treturn 'marketplace/' + this.message_type;\n\t\t}\n\t},\n\tmethods: {\n\t\tsend_message(message) {\n\t\t\tthis.messages.push({\n\t\t\t\tsender: frappe.session.user,\n\t\t\t\tmessage: message,\n\t\t\t\tcreation: Date.now(),\n\t\t\t\tname: frappe.utils.get_random(6)\n\t\t\t});\n\t\t\thub.call('send_message', {\n\t\t\t\tto_seller: this.get_against_seller(),\n\t\t\t\thub_item: this.item_details.name,\n\t\t\t\tmessage\n\t\t\t});\n\t\t},\n\t\tget_item_details(hub_item_name) {\n\t\t\treturn hub.call('get_item_details', { hub_item_name })\n\t\t},\n\t\tget_messages() {\n\t\t\tif (!this.item_details) return [];\n\t\t\treturn hub.call('get_messages', {\n\t\t\t\tagainst_seller: this.get_against_seller(),\n\t\t\t\tagainst_item: this.item_details.name\n\t\t\t});\n\t\t},\n\t\tget_against_seller() {\n\t\t\tif (this.message_type === 'buying') {\n\t\t\t\treturn this.item_details.hub_seller;\n\t\t\t} else if (this.message_type === 'selling') {\n\t\t\t\treturn frappe.get_route()[2];\n\t\t\t}\n\t\t},\n\t\tget_hub_item_name() {\n\t\t\tif (this.message_type === 'buying') {\n\t\t\t\treturn frappe.get_route()[2];\n\t\t\t} else if (this.message_type === 'selling') {\n\t\t\t\treturn frappe.get_route()[3];\n\t\t\t}\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'not-found-page',\n\tdata() {\n\t\treturn {\n\t\t\tpage_name: 'not-found',\n\t\t\taction: {\n\t\t\t\tlabel: __('Back to Home'),\n\t\t\t\ton_click: () => {\n\t\t\t\t\tfrappe.set_route(`marketplace/home`);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Constants\n\t\t\tempty_state_message: __('Sorry! We could not find what you were looking for.')\n\t\t};\n\t},\n}\n","//\n//\n//\n//\n//\n//\n\n\nimport Home from './pages/Home.vue';\nimport Search from './pages/Search.vue';\nimport Category from './pages/Category.vue';\nimport SavedItems from './pages/SavedItems.vue';\nimport FeaturedItems from './pages/FeaturedItems.vue';\nimport PublishedItems from './pages/PublishedItems.vue';\nimport Item from './pages/Item.vue';\nimport Seller from './pages/Seller.vue';\nimport SellerItems from './pages/SellerItems.vue';\nimport Publish from './pages/Publish.vue';\nimport Buying from './pages/Buying.vue';\nimport Selling from './pages/Selling.vue';\nimport Messages from './pages/Messages.vue';\nimport NotFound from './pages/NotFound.vue';\n\nfunction get_route_map() {\n\tconst read_only_routes = {\n\t\t'marketplace/home': Home,\n\t\t'marketplace/search/:category/:keyword': Search,\n\t\t'marketplace/category/:category': Category,\n\t\t'marketplace/item/:item': Item,\n\t\t'marketplace/seller/:seller': Seller,\n\t\t'marketplace/seller/:seller/items': SellerItems,\n\t\t'marketplace/not-found': NotFound,\n\t}\n\tconst registered_routes = {\n\t\t'marketplace/profile': Seller,\n\t\t'marketplace/saved-items': SavedItems,\n\t\t'marketplace/featured-items': FeaturedItems,\n\t\t'marketplace/publish': Publish,\n\t\t'marketplace/published-items': PublishedItems,\n\t\t'marketplace/buying': Buying,\n\t\t'marketplace/buying/:item': Messages,\n\t\t'marketplace/selling': Selling,\n\t\t'marketplace/selling/:buyer/:item': Messages\n\t}\n\n\treturn hub.is_seller_registered()\n\t\t? Object.assign({}, read_only_routes, registered_routes)\n\t\t: read_only_routes;\n}\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcurrent_page: this.get_current_page()\n\t\t}\n\t},\n\tmounted() {\n\t\tfrappe.route.on('change', () => {\n\t\t\tif (frappe.get_route()[0] === 'marketplace') {\n\t\t\t\tthis.set_current_page();\n\t\t\t\tfrappe.utils.scroll_to(0);\n\t\t\t}\n\t\t});\n\t},\n\tmethods: {\n\t\tset_current_page() {\n\t\t\tthis.current_page = this.get_current_page();\n\t\t},\n\t\tget_current_page() {\n\t\t\tconst route_map = get_route_map();\n\t\t\tconst curr_route = frappe.get_route_str();\n\t\t\tlet route = Object.keys(route_map).filter(route => route == curr_route)[0];\n\t\t\tif (!route) {\n\t\t\t\t// find route by matching it with dynamic part\n\t\t\t\tconst curr_route_parts = curr_route.split('/');\n\t\t\t\tconst weighted_routes = Object.keys(route_map)\n\t\t\t\t\t.map(route_str => route_str.split('/'))\n\t\t\t\t\t.filter(route_parts => route_parts.length === curr_route_parts.length)\n\t\t\t\t\t.reduce((obj, route_parts) => {\n\t\t\t\t\t\tconst key = route_parts.join('/');\n\t\t\t\t\t\tlet weight = 0;\n\t\t\t\t\t\troute_parts.forEach((part, i) => {\n\t\t\t\t\t\t\tconst curr_route_part = curr_route_parts[i];\n\t\t\t\t\t\t\tif (part === curr_route_part || part.includes(':')) {\n\t\t\t\t\t\t\t\tweight += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tobj[key] = weight;\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t}, {});\n\n\t\t\t\t// get the route with the highest weight\n\t\t\t\tfor (let key in weighted_routes) {\n\t\t\t\t\tconst route_weight = weighted_routes[key];\n\t\t\t\t\tif (route_weight === curr_route_parts.length) {\n\t\t\t\t\t\troute = key;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\troute = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!route) {\n\t\t\t\treturn {\n\t\t\t\t\tkey: 'not-found',\n\t\t\t\t\tcomponent: NotFound\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tkey: curr_route,\n\t\t\t\tcomponent: route_map[route]\n\t\t\t}\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\thub_registered: hub.is_user_registered(),\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Browse'),\n\t\t\t\t\troute: 'marketplace/home'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Saved Items'),\n\t\t\t\t\troute: 'marketplace/saved-items',\n\t\t\t\t\tcondition: () => this.hub_registered\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Your Featured Items'),\n\t\t\t\t\troute: 'marketplace/featured-items',\n\t\t\t\t\tcondition: () => this.hub_registered\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Your Profile'),\n\t\t\t\t\troute: 'marketplace/profile',\n\t\t\t\t\tcondition: () => this.hub_registered\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Your Items'),\n\t\t\t\t\troute: 'marketplace/published-items',\n\t\t\t\t\tcondition: () => this.hub_registered\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Publish Items'),\n\t\t\t\t\troute: 'marketplace/publish',\n\t\t\t\t\tcondition: () => this.hub_registered\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Selling'),\n\t\t\t\t\troute: 'marketplace/selling',\n\t\t\t\t\tcondition: () => this.hub_registered\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Buying'),\n\t\t\t\t\troute: 'marketplace/buying',\n\t\t\t\t\tcondition: () => this.hub_registered\n\t\t\t\t},\n\t\t\t],\n\t\t\tcategories: []\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_categories()\n\t\t\t.then(categories => {\n\t\t\t\tthis.categories = categories.map(c => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: __(c.name),\n\t\t\t\t\t\troute: 'marketplace/category/' + c.name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.categories.unshift({\n\t\t\t\t\tlabel: __('All'),\n\t\t\t\t\troute: 'marketplace/home'\n\t\t\t\t});\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.update_sidebar_state();\n\t\t\t\t});\n\t\t\t});\n\n\t\terpnext.hub.on('seller-registered', () => {\n\t\t\tthis.hub_registered = true;\n\t\t})\n\t},\n\tmounted() {\n\t\tthis.update_sidebar_state();\n\t\tfrappe.route.on('change', () => this.update_sidebar_state());\n\t},\n\tmethods: {\n\t\tget_categories() {\n\t\t\treturn hub.call('get_categories');\n\t\t},\n\t\tupdate_sidebar_state() {\n\t\t\tconst container = $(this.$refs['sidebar-container']);\n\t\t\tconst route = frappe.get_route();\n\t\t\tconst route_str = route.join('/');\n\t\t\tconst part_route_str = route.slice(0, 2).join('/');\n\t\t\tconst $sidebar_item = container.find(`[data-route=\"${route_str}\"], [data-route=\"${part_route_str}\"]`);\n\n\t\t\tconst $siblings = container.find('[data-route]');\n\t\t\t$siblings.removeClass('active').addClass('text-muted');\n\t\t\t$sidebar_item.addClass('active').removeClass('text-muted');\n\t\t},\n\t}\n}\n","import Vue from 'vue/dist/vue.js';\nimport './vue-plugins';\n\n// components\nimport PageContainer from './PageContainer.vue';\nimport Sidebar from './Sidebar.vue';\nimport { ProfileDialog } from './components/profile_dialog';\n\n// helpers\nimport './hub_call';\n\nfrappe.provide('hub');\nfrappe.provide('erpnext.hub');\nfrappe.provide('frappe.route');\n\nfrappe.utils.make_event_emitter(frappe.route);\nfrappe.utils.make_event_emitter(erpnext.hub);\n\nerpnext.hub.Marketplace = class Marketplace {\n\tconstructor({ parent }) {\n\t\tthis.$parent = $(parent);\n\t\tthis.page = parent.page;\n\n\t\tthis.update_hub_settings().then(() => {\n\n\t\t\tthis.setup_header();\n\t\t\tthis.make_sidebar();\n\t\t\tthis.make_body();\n\t\t\tthis.setup_events();\n\t\t\tthis.refresh();\n\n\t\t\tif (!hub.is_server) {\n\t\t\t\tif (!hub.is_seller_registered()) {\n\t\t\t\t\tthis.page.set_primary_action('Become a Seller', this.show_register_dialog.bind(this))\n\t\t\t\t} else {\n\t\t\t\t\tthis.page.set_secondary_action('Add Users', this.show_add_user_dialog.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tsetup_header() {\n\t\tif (hub.is_server) return;\n\t\tthis.page.set_title(__('Marketplace'));\n\t}\n\n\tsetup_events() {\n\t\tthis.$parent.on('click', '[data-route]', (e) => {\n\t\t\tconst $target = $(e.currentTarget);\n\t\t\tconst route = $target.data().route;\n\t\t\tfrappe.set_route(route);\n\t\t});\n\n\t\t// generic action handler\n\t\tthis.$parent.on('click', '[data-action]', e => {\n\t\t\tconst $target = $(e.currentTarget);\n\t\t\tconst action = $target.data().action;\n\n\t\t\tif (action && this[action]) {\n\t\t\t\tthis[action].apply(this, $target);\n\t\t\t}\n\t\t})\n\t}\n\n\tmake_sidebar() {\n\t\tthis.$sidebar = this.$parent.find('.layout-side-section').addClass('hidden-xs');\n\n\t\tnew Vue({\n\t\t\tel: $('<div>').appendTo(this.$sidebar)[0],\n\t\t\trender: h => h(Sidebar)\n\t\t});\n\t}\n\n\tmake_body() {\n\t\tthis.$body = this.$parent.find('.layout-main-section');\n\t\tthis.$page_container = $('<div class=\"hub-page-container\">').appendTo(this.$body);\n\n\t\tnew Vue({\n\t\t\tel: '.hub-page-container',\n\t\t\trender: h => h(PageContainer)\n\t\t});\n\n\t\tif (!hub.is_server) {\n\t\t\terpnext.hub.on('seller-registered', () => {\n\t\t\t\tthis.page.clear_primary_action();\n\t\t\t});\n\t\t}\n\t}\n\n\trefresh() {\n\n\t}\n\n\tshow_register_dialog() {\n\t\tif(frappe.session.user === 'Administrator') {\n\t\t\tfrappe.msgprint(__('You need to be a user other than Administrator with System Manager and Item Manager roles to register on Marketplace.'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (!is_subset(['System Manager', 'Item Manager'], frappe.user_roles)) {\n\t\t\tfrappe.msgprint(__('You need to be a user with System Manager and Item Manager roles to register on Marketplace.'));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.register_dialog = ProfileDialog(\n\t\t\t__('Become a Seller'),\n\t\t\t{\n\t\t\t\tlabel: __('Register'),\n\t\t\t\ton_submit: this.register_marketplace.bind(this)\n\t\t\t}\n\t\t);\n\n\t\tthis.register_dialog.show();\n\t}\n\n\tregister_marketplace({company, company_description}) {\n\t\tfrappe.call({\n\t\t    method: 'erpnext.hub_node.api.register_marketplace',\n\t\t    args: {\n\t\t\t\tcompany,\n\t\t\t\tcompany_description\n\t\t\t}\n\t\t}).then((r) => {\n\t\t\tif (r.message && r.message.ok) {\n\t\t\t\tthis.register_dialog.hide();\n\n\t\t\t\tthis.update_hub_settings()\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tfrappe.set_route('marketplace', 'publish');\n\t\t\t\t\t\terpnext.hub.trigger('seller-registered');\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tshow_add_user_dialog() {\n\t\tif (!is_subset(['System Manager', 'Item Manager'], frappe.user_roles)) {\n\t\t\tfrappe.msgprint(__('You need to be a user with System Manager and Item Manager roles to add users to Marketplace.'));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.get_unregistered_users()\n\t\t\t.then(r => {\n\t\t\t\tconst user_list = r.message;\n\n\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\ttitle: __('Add Users to Marketplace'),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __('Users'),\n\t\t\t\t\t\t\tfieldname: 'users',\n\t\t\t\t\t\t\tfieldtype: 'MultiSelect',\n\t\t\t\t\t\t\treqd: 1,\n\t\t\t\t\t\t\tget_data() {\n\t\t\t\t\t\t\t\treturn user_list;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tprimary_action({ users }) {\n\t\t\t\t\t\tconst selected_users = users.split(',').map(d => d.trim()).filter(Boolean);\n\n\t\t\t\t\t\tif (!selected_users.every(user => user_list.includes(user))) {\n\t\t\t\t\t\t\td.set_df_property('users', 'description', __('Some emails are invalid'));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\td.set_df_property('users', 'description', '');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfrappe.call('erpnext.hub_node.api.register_users', {\n\t\t\t\t\t\t\tuser_list: selected_users\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(r => {\n\t\t\t\t\t\t\td.hide();\n\n\t\t\t\t\t\t\tif (r.message && r.message.length) {\n\t\t\t\t\t\t\t\tfrappe.show_alert(__('Added {0} users', [r.message.length]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\td.show();\n\t\t\t});\n\t}\n\n\tget_unregistered_users() {\n\t\treturn frappe.call('erpnext.hub_node.api.get_unregistered_users')\n\t}\n\n\tupdate_hub_settings() {\n\t\treturn hub.get_settings().then(doc => {\n\t\t\thub.settings = doc;\n\t\t});\n\t}\n}\n\nObject.assign(hub, {\n\tis_seller_registered() {\n\t\treturn hub.settings.registered;\n\t},\n\n\tis_user_registered() {\n\t\treturn this.is_seller_registered() && hub.settings.users\n\t\t\t.filter(hub_user => hub_user.user === frappe.session.user)\n\t\t\t.length === 1;\n\t},\n\n\tget_settings() {\n\t\tif (frappe.session.user === 'Guest') {\n\t\t\treturn Promise.resolve({\n\t\t\t\tregistered: 0\n\t\t\t});\n\t\t}\n\t\treturn frappe.db.get_doc('Marketplace Settings');\n\t}\n});\n\n/**\n * Returns true if list_a is subset of list_b\n * @param {Array} list_a\n * @param {Array} list_b\n */\nfunction is_subset(list_a, list_b) {\n\treturn list_a.every(item => list_b.includes(item));\n}\n","frappe.provide('hub');\nfrappe.provide('erpnext.hub');\n\nerpnext.hub.cache = {};\nhub.call = function call_hub_method(method, args={}, clear_cache_on_event) { // eslint-disable-line\n\treturn new Promise((resolve, reject) => {\n\n\t\t// cache\n\t\tconst key = method + JSON.stringify(args);\n\t\tif (erpnext.hub.cache[key]) {\n\t\t\tresolve(erpnext.hub.cache[key]);\n\t\t}\n\n\t\t// cache invalidation\n\t\tconst clear_cache = () => delete erpnext.hub.cache[key];\n\n\t\tif (!clear_cache_on_event) {\n\t\t\tinvalidate_after_5_mins(clear_cache);\n\t\t} else {\n\t\t\terpnext.hub.on(clear_cache_on_event, () => {\n\t\t\t\tclear_cache(key);\n\t\t\t});\n\t\t}\n\n\t\tlet res;\n\t\tif (hub.is_server) {\n\t\t\tres = frappe.call({\n\t\t\t\tmethod: 'hub.hub.api.' + method,\n\t\t\t\targs\n\t\t\t});\n\t\t} else {\n\t\t\tres = frappe.call({\n\t\t\t\tmethod: 'erpnext.hub_node.api.call_hub_method',\n\t\t\t\targs: {\n\t\t\t\t\tmethod,\n\t\t\t\t\tparams: args\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tres.then(r => {\n\t\t\tif (r.message) {\n\t\t\t\tconst response = r.message;\n\t\t\t\tif (response.error) {\n\t\t\t\t\tfrappe.throw({\n\t\t\t\t\t\ttitle: __('Marketplace Error'),\n\t\t\t\t\t\tmessage: response.error\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\terpnext.hub.cache[key] = response;\n\t\t\t\terpnext.hub.trigger(`response:${key}`, { response });\n\t\t\t\tresolve(response);\n\t\t\t}\n\t\t\treject(r);\n\n\t\t}).fail(reject);\n\t});\n};\n\nfunction invalidate_after_5_mins(clear_cache) {\n\t// cache invalidation after 5 minutes\n\tconst timeout = 5 * 60 * 1000;\n\n\tsetTimeout(() => {\n\t\tclear_cache();\n\t}, timeout);\n}\n","const ProfileDialog = (title = __('Edit Profile'), action={}) => {\n\tconst fields = [\n\t\t{\n\t\t\tfieldtype: 'Link',\n\t\t\tfieldname: 'company',\n\t\t\tlabel: __('Company'),\n\t\t\toptions: 'Company'\n\t\t},\n\t\t{\n\t\t\tfieldtype: 'Read Only',\n\t\t\tfieldname: 'email',\n\t\t\tlabel: __('Email')\n\t\t},\n\t\t{\n\t\t\tlabel: __('About your company'),\n\t\t\tfieldname: 'company_description',\n\t\t\tfieldtype: 'Text'\n\t\t}\n\t];\n\n\tlet dialog = new frappe.ui.Dialog({\n\t\ttitle: title,\n\t\tfields: fields,\n\t\tprimary_action_label: action.label || __('Update'),\n\t\tprimary_action: () => {\n\t\t\tconst form_values = dialog.get_values();\n\t\t\tlet values_filled = true;\n\n\t\t\t// TODO: Say \"we notice that the company description and logo isn't set. Please set them in master.\"\n\t\t\t// Only then allow to register\n\n\t\t\tconst mandatory_fields = ['company', 'company_description'];\n\t\t\tmandatory_fields.forEach(field => {\n\t\t\t\tconst value = form_values[field];\n\t\t\t\tif (!value) {\n\t\t\t\t\tdialog.set_df_property(field, 'reqd', 1);\n\t\t\t\t\tvalues_filled = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!values_filled) return;\n\n\t\t\taction.on_submit(form_values);\n\t\t}\n\t});\n\n\t// Post create\n\tconst default_company = frappe.defaults.get_default('company');\n\tdialog.set_value('company', default_company);\n\tdialog.set_value('email', frappe.session.user);\n\n\treturn dialog;\n}\n\nexport {\n\tProfileDialog\n}\n"],"names":["name","props","computed","title","const","item_name","this","item","strip_html","subtitle","is_local","comment_when","creation","let","subtitle_items","rating","average_rating","push","company","join","item_id","item_id_fieldname","message","String","bordered","Boolean","height","Number","action","Object","centered","type","default","container_name","items","Array","on_click","Function","editable","empty_state_message","empty_state_action","empty_state_height","empty_state_bordered","components","ItemCard","EmptyState","watch","frappe","dom","handle_broken_images","$","$el","placeholder","value","on_search","methods","on_input","event","$emit","target","data","back_to_home_text","__","header_items","spacer","is_loading","is_broken","created","handle_image","img","Image","src","onload","onerror","prototype","window","Vue","component","ItemCardsContainer","SectionHeader","SearchInput","DetailView","DetailHeaderItem","directive","bind","el","binding","route","classList","add","dataset","addEventListener","set_route","unbind","remove","filter","text","page_name","get_route","search_value","sections","show_skeleton","search_placeholder","get_items","mounted","on","get_route_str","hub","call","defaults","country","get_user_default","then","random_items","items_by_country","length","category_items","keys","map","category","expandable","go_to_item_details_page","hub_item_name","set_search_route","filters","page_title","keyword","set_route_and_get_items","hub_category","on_item_remove","alert","reverted","show_alert","None","grace_period","undo-remove","toggle_item","hide","setTimeout","remove_item_from_saved_items","erpnext","trigger","hub_user","session","user","catch","e","console","log","show","seen","alert_message","remove_item_from_featured_items","publish_page_action","label","hub_seller","settings","hub_seller_name","Rating","user_review","subject","content","reviews","get_item_reviews","make_input","set_rating","i","when","datetime","review_content","ui","form","make_control","parent","$refs","on_submit","on_submit_review","no_wrapper","only_input","render_input","df","fieldtype","fieldname","review","assign","get_value","is_seller_registered","throw","JSON","stringify","push_review","reset_user_review","set_value","unshift","init","image","is_own_item","menu_items","condition","is_user_registered","add_to_saved_items","add_to_featured_items","report_item","edit_details","unpublish_item","item_subtitle","go_to_seller_profile_page","item_views_and_ratings","stats","view_count","rating_html","star_class","get_rating_html","no_of_ratings","primary_action","contact_seller","get_item_details","item_received","build_data","make_dialogs","seller_name","description","seller_description","make_contact_seller_dialog","make_report_item_dialog","make_editing_dialog","saved_items_link","error","featured_items_link","contact_seller_dialog","Dialog","fields","ref","hub_item","report_item_dialog","d","params","dialog","edit_dialog","fn","values","update_details","reqd","options","primary_action_label","categories","fields_dict","set_data","ref_doc","r","confirm","item_code","seller_company","profile","recent_seller_reviews","seller_product_view_stats","seller_traffic_chart","item_container_heading","site_name","joined_when","get_seller_profile_and_items","is_own_company","timestamp","post_data","is_featured_item","logo","company_description","init_seller_traffic_chart","go_to_seller_items_page","lables","tooltip_lables","datasets","chartType","stat","date","substring","Date","toDateString","labels","Chart","colors","tooltipOptions","formatTooltipX","formatTooltipY","get_seller_and_items","valid_items","selected_items","items_data_to_publish","valid_items_instruction","last_sync_message","last_sync_datetime","no_selected_items","publish_button_text","number","items_dict","get_valid_items","make_publishing_dialog","publish_selected_items","items_to_publish","db","get_doc","doc","add_last_sync_message","clear_last_sync_message","remove_item_from_selection","secondary_action","item_publish_dialog","add_item_to_publish","get_values","update_items_data_to_publish","read_only","item_doc","item_to_publish","show_publishing_dialog_for_item","item_data","clear","image_list","attachments","attachment","file_url","set_values","ItemListCard","get_items_for_messages","get_sender","sender","sender_name","message_input","reset","submit_input","submit","message_type","item_details","messages","get_hub_item_name","get_messages","back_link","send_message","now","utils","get_random","to_seller","get_against_seller","against_seller","against_item","current_page","get_current_page","set_current_page","scroll_to","read_only_routes","registered_routes","route_map","marketplace/home","Home","marketplace/search/:category/:keyword","Search","marketplace/category/:category","Category","marketplace/item/:item","Item","marketplace/seller/:seller","Seller","marketplace/seller/:seller/items","SellerItems","marketplace/not-found","NotFound","marketplace/profile","marketplace/saved-items","SavedItems","marketplace/featured-items","FeaturedItems","marketplace/publish","Publish","marketplace/published-items","PublishedItems","marketplace/buying","Buying","marketplace/buying/:item","Messages","marketplace/selling","Selling","marketplace/selling/:buyer/:item","curr_route","curr_route_parts","split","weighted_routes","route_str","route_parts","reduce","obj","key","weight","forEach","part","includes","hub_registered","get_categories","c","$nextTick","update_sidebar_state","container","part_route_str","slice","$sidebar_item","find","removeClass","addClass","is_subset","list_a","list_b","every","provide","cache","method","args","clear_cache_on_event","Promise","resolve","reject","clear_cache","invalidate_after_5_mins","is_server","response","fail","make_event_emitter","Marketplace","[object Object]","$parent","page","update_hub_settings","setup_header","make_sidebar","make_body","setup_events","refresh","set_secondary_action","show_add_user_dialog","set_primary_action","show_register_dialog","set_title","currentTarget","$target","apply","$sidebar","appendTo","render","h","Sidebar","$body","$page_container","PageContainer","clear_primary_action","user_roles","register_dialog","form_values","values_filled","field","set_df_property","default_company","get_default","ProfileDialog","register_marketplace","msgprint","ok","get_unregistered_users","user_list","get_data","selected_users","trim","get_settings","registered","users"],"mappings":"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"}